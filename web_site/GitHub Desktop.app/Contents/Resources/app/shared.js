var _Mathmin=Math.min,_Mathround=Math.round;module.exports=function(t){function d(S){if(A[S])return A[S].exports;var w=A[S]={i:S,l:!1,exports:{}};return t[S].call(w.exports,w,w.exports,d),w.l=!0,w.exports}var A={};return d.m=t,d.c=A,d.i=function(S){return S},d.d=function(S,w,C){d.o(S,w)||Object.defineProperty(S,w,{configurable:!1,enumerable:!0,get:C})},d.n=function(S){var w=S&&S.__esModule?function(){return S['default']}:function(){return S};return d.d(w,'a',w),w},d.o=function(S,w){return Object.prototype.hasOwnProperty.call(S,w)},d.p='',d(d.s=68)}([function(t){t.exports=require('path')},function(t){t.exports=require('fs')},function(t,d){function S(W){var V=W.match(H);return V?{scheme:V[1],auth:V[2],host:V[3],port:V[4],path:V[5]}:null}function w(W){var V='';return W.scheme&&(V+=W.scheme+':'),V+='//',W.auth&&(V+=W.auth+'@'),W.host&&(V+=W.host),W.port&&(V+=':'+W.port),W.path&&(V+=W.path),V}function C(W){var V=W,$=S(W);if($){if(!$.path)return W;V=$.path}for(var J=d.isAbsolute(V),X=V.split(/\/+/),Y=0,Z=X.length-1,Q;0<=Z;Z--)Q=X[Z],'.'===Q?X.splice(Z,1):'..'===Q?Y++:0<Y&&(''===Q?(X.splice(Z+1,Y),Y=0):(X.splice(Z,2),Y--));return V=X.join('/'),''===V&&(V=J?'/':'.'),$?($.path=V,w($)):V}function M(W){return W}function I(W){if(!W)return!1;var V=W.length;if(9>V)return!1;if(95!==W.charCodeAt(V-1)||95!==W.charCodeAt(V-2)||111!==W.charCodeAt(V-3)||116!==W.charCodeAt(V-4)||111!==W.charCodeAt(V-5)||114!==W.charCodeAt(V-6)||112!==W.charCodeAt(V-7)||95!==W.charCodeAt(V-8)||95!==W.charCodeAt(V-9))return!1;for(var $=V-10;0<=$;$--)if(36!==W.charCodeAt($))return!1;return!0}function B(W,V){return W===V?0:W>V?1:-1}d.getArg=function(W,V,$){if(V in W)return W[V];if(3===arguments.length)return $;throw new Error('"'+V+'" is a required argument.')};var H=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,G=/^data:.+\,.+$/;d.urlParse=S,d.urlGenerate=w,d.normalize=C,d.join=function(W,V){''===W&&(W='.'),''===V&&(V='.');var $=S(V),J=S(W);if(J&&(W=J.path||'/'),$&&!$.scheme)return J&&($.scheme=J.scheme),w($);if($||V.match(G))return V;if(J&&!J.host&&!J.path)return J.host=V,w(J);var X='/'===V.charAt(0)?V:C(W.replace(/\/+$/,'')+'/'+V);return J?(J.path=X,w(J)):X},d.isAbsolute=function(W){return'/'===W.charAt(0)||!!W.match(H)},d.relative=function(W,V){''===W&&(W='.'),W=W.replace(/\/$/,'');for(var $=0,J;0!==V.indexOf(W+'/');){if(J=W.lastIndexOf('/'),0>J)return V;if(W=W.slice(0,J),W.match(/^([^\/]+:\/)?\/*$/))return V;++$}return Array($+1).join('../')+V.substr(W.length+1)};var z=function(){var W=Object.create(null);return!('__proto__'in W)}();d.toSetString=z?M:function(W){return I(W)?'$'+W:W},d.fromSetString=z?M:function(W){return I(W)?W.slice(1):W},d.compareByOriginalPositions=function(W,V,$){var J=W.source-V.source;return 0==J?(J=W.originalLine-V.originalLine,0!=J)?J:(J=W.originalColumn-V.originalColumn,0!=J||$)?J:(J=W.generatedColumn-V.generatedColumn,0!=J)?J:(J=W.generatedLine-V.generatedLine,0==J?W.name-V.name:J):J},d.compareByGeneratedPositionsDeflated=function(W,V,$){var J=W.generatedLine-V.generatedLine;return 0==J?(J=W.generatedColumn-V.generatedColumn,0!=J||$)?J:(J=W.source-V.source,0!=J)?J:(J=W.originalLine-V.originalLine,0!=J)?J:(J=W.originalColumn-V.originalColumn,0==J?W.name-V.name:J):J},d.compareByGeneratedPositionsInflated=function(W,V){var $=W.generatedLine-V.generatedLine;return 0==$?($=W.generatedColumn-V.generatedColumn,0!=$)?$:($=B(W.source,V.source),0!==$)?$:($=W.originalLine-V.originalLine,0!==$)?$:($=W.originalColumn-V.originalColumn,0===$?B(W.name,V.name):$):$}},function(t){t.exports=require('electron')},function(t,d,A){'use strict';Object.defineProperty(d,'__esModule',{value:!0});const S=A(5);class w{static fromJSON(C){return new w(C.login,C.endpoint,C.token,C.emails,C.avatarURL,C.id,C.name)}static anonymous(){return new w('',S.getDotComAPIEndpoint(),'',[],'',-1,'')}constructor(C,R,O,M,L,N,I){this.login=C,this.endpoint=R,this.token=O,this.emails=M,this.avatarURL=L,this.id=N,this.name=I}withToken(C){return new w(this.login,this.endpoint,C,this.emails,this.avatarURL,this.id,this.name)}}d.Account=w},function(t,d,A){'use strict';function S(oe){const ae=oe.headers.get('Link');if(!ae)return null;for(const ie of ae.split(',')){const se=ie.match(/<([^>]+)>; rel="([^"]+)"/);if(se&&'next'===se[2]){const de=z.parse(se[1]);return de.path||null}}return null}function w(oe){return oe.toISOString().replace(/\.\d{3}Z$/,'Z')}function M(){return H(this,void 0,void 0,function*(){let oe='unknown';try{oe=yield X()}catch(ae){log.error(`getNote: unable to resolve machine username, using '${oe}' as a fallback`,ae)}return`GitHub Desktop on ${oe}@${G.hostname()}`})}function N(oe){if(oe===D())return'https://github.com';const ae=z.parse(oe);return`${ae.protocol}//${ae.hostname}`}function D(){const oe=process.env.API_ENDPOINT;return oe&&0<oe.length?oe:'https://api.github.com'}var H=this&&this.__awaiter||function(oe,ae,ie,se){return new(ie||(ie=Promise))(function(de,le){function ue(ge){try{pe(se.next(ge))}catch(fe){le(fe)}}function ce(ge){try{pe(se['throw'](ge))}catch(fe){le(fe)}}function pe(ge){ge.done?de(ge.value):new ie(function(fe){fe(ge.value)}).then(ue,ce)}pe((se=se.apply(oe,ae||[])).next())})};Object.defineProperty(d,'__esModule',{value:!0});const G=A(17),z=A(72),W=A(4),V=A(64),$=A(60),J=A(67),X=A(54),Q='de0e3c7e9973e1c4dd77',Y='1273305a5fc2737c2ca2911948ba24a9d961e2a3';Q.length&&Y&&Y.length||log.warn(`DESKTOP_OAUTH_CLIENT_ID and/or DESKTOP_OAUTH_CLIENT_SECRET is undefined. You won't be able to authenticate new users.`);const Z=['repo','user'];class ne{static fromAccount(oe){return new ne(oe.endpoint,oe.token)}constructor(oe,ae){this.endpoint=oe,this.token=ae}fetchRepository(oe,ae){return H(this,void 0,void 0,function*(){try{const ie=yield this.request('GET',`repos/${oe}/${ae}`);return V.parsedResponse(ie)}catch(ie){return log.warn(`fetchRepository: not found '${oe}/${ae}'`,ie),null}})}fetchAccount(){return H(this,void 0,void 0,function*(){try{const oe=yield this.request('GET','user'),ae=yield V.parsedResponse(oe);return ae}catch(oe){throw log.warn(`fetchAccount: failed with endpoint ${this.endpoint}`,oe),oe}})}fetchEmails(){return H(this,void 0,void 0,function*(){const oe=this.endpoint===D();try{const ae=oe?'user/public_emails':'user/emails',ie=yield this.request('GET',ae),se=yield V.parsedResponse(ie);return Array.isArray(se)?se:[]}catch(ae){return log.warn(`fetchEmails: failed with endpoint ${this.endpoint}`,ae),[]}})}fetchCommit(oe,ae,ie){return H(this,void 0,void 0,function*(){try{const se=yield this.request('GET',`repos/${oe}/${ae}/commits/${ie}`);return V.parsedResponse(se)}catch(se){return log.warn(`fetchCommit: not found '${oe}/${ae}@${ie}'`,se),null}})}searchForUserWithEmail(oe){return H(this,void 0,void 0,function*(){try{const ae={q:`${oe} in:email type:user`},ie=V.urlWithQueryString('search/users',ae),se=yield this.request('GET',ie),de=yield V.parsedResponse(se),le=de.items;return le.length?le[0]:null}catch(ae){return log.warn(`searchForUserWithEmail: not found '${oe}'`,ae),null}})}fetchOrgs(){return H(this,void 0,void 0,function*(){try{return this.fetchAll('user/orgs')}catch(oe){return log.warn(`fetchOrgs: failed with endpoint ${this.endpoint}`,oe),[]}})}createRepository(oe,ae,ie,se){return H(this,void 0,void 0,function*(){try{const de=oe?`orgs/${oe.login}/repos`:'user/repos',le=yield this.request('POST',de,{name:ae,description:ie,private:se});return V.parsedResponse(le)}catch(de){throw log.warn(`createRepository: failed with endpoint ${this.endpoint}`,de),de}})}fetchIssues(oe,ae,ie,se){return H(this,void 0,void 0,function*(){const de=se&&!isNaN(se.getTime())?{since:w(se)}:{},le=V.urlWithQueryString(`repos/${oe}/${ae}/issues`,de);try{const ue=yield this.fetchAll(le);return ue.filter((ce)=>!ce.pullRequest)}catch(ue){throw log.warn(`fetchIssues: failed for repository ${oe}/${ae}`,ue),ue}})}fetchAll(oe){return H(this,void 0,void 0,function*(){const ae=[];let ie=oe;do{const se=yield this.request('GET',ie),de=yield V.parsedResponse(se);de&&ae.push(...de),ie=S(se)}while(ie);return ae})}request(oe,ae,ie,se){return V.request(this.endpoint,this.token,oe,ae,ie,se)}getFetchPollInterval(oe,ae){return H(this,void 0,void 0,function*(){const ie=`repos/${oe}/${ae}/git`;try{const se=yield this.request('HEAD',ie),de=se.headers.get('x-poll-interval');if(de){const le=parseInt(de,10);return isNaN(le)?null:le}return null}catch(se){return log.warn(`getFetchPollInterval: failed for ${oe}/${ae}`,se),null}})}fetchMentionables(oe,ae,ie){return H(this,void 0,void 0,function*(){const se={Accept:'application/vnd.github.jerry-maguire-preview'};ie&&(se['If-None-Match']=ie);try{const de=yield this.request('GET',`repos/${oe}/${ae}/mentionables/users`,void 0,se),le=yield V.parsedResponse(de),ue=de.headers.get('etag');return{users:le,etag:ue||''}}catch(de){return log.warn(`fetchMentionables: failed for ${oe}/${ae}`,de),null}})}}d.API=ne;var te;(function(oe){oe[oe.Authorized=0]='Authorized',oe[oe.Failed=1]='Failed',oe[oe.TwoFactorAuthenticationRequired=2]='TwoFactorAuthenticationRequired',oe[oe.UserRequiresVerification=3]='UserRequiresVerification',oe[oe.PersonalAccessTokenBlocked=4]='PersonalAccessTokenBlocked',oe[oe.Error=5]='Error',oe[oe.EnterpriseTooOld=6]='EnterpriseTooOld'})(te=d.AuthorizationResponseKind||(d.AuthorizationResponseKind={})),d.createAuthorization=function(oe,ae,ie,se){return H(this,void 0,void 0,function*(){const de=Buffer.from(`${ae}:${ie}`,'utf8').toString('base64'),le=`Basic ${de}`,ue=se?{'X-GitHub-OTP':se}:{},ce=yield M(),pe=yield V.request(oe,null,'POST','authorizations',{scopes:Z,client_id:Q,client_secret:Y,note:ce,note_url:'https://desktop.github.com/',fingerprint:J.uuid()},Object.assign({Authorization:le},ue));try{const ge=yield V.parsedResponse(pe);if(ge){const fe=ge.token;if(fe&&'string'==typeof fe&&fe.length)return{kind:te.Authorized,token:fe}}}catch(ge){if(401===pe.status){const he=pe.headers.get('x-github-otp');if(he){const me=he.split(';');if(2===me.length){const ye=me[1].trim();return'app'===ye?{kind:te.TwoFactorAuthenticationRequired,type:$.AuthenticationMode.App}:'sms'===ye?{kind:te.TwoFactorAuthenticationRequired,type:$.AuthenticationMode.Sms}:{kind:te.Failed,response:pe}}}return{kind:te.Failed,response:pe}}const fe=ge instanceof V.APIError&&ge.apiError;if(fe){if(403===pe.status&&'This API can only be accessed with username and password Basic Auth'===fe.message)return{kind:te.PersonalAccessTokenBlocked};if(422===pe.status)if(fe.errors)for(const he of fe.errors){const me='oauthaccess'===he.resource.toLowerCase(),ye='user'===he.field.toLowerCase();if(ye&&me)return{kind:te.UserRequiresVerification}}else if('Invalid OAuth application client_id or secret.'===fe.message)return{kind:te.EnterpriseTooOld}}}return{kind:te.Error,response:pe}})},d.fetchUser=function(oe,ae){return H(this,void 0,void 0,function*(){const ie=new ne(oe,ae);try{const se=yield ie.fetchAccount(),de=yield ie.fetchEmails();return new W.Account(se.login,oe,ae,de,se.avatar_url,se.id,se.name)}catch(se){throw log.warn(`fetchUser: failed with endpoint ${oe}`,se),se}})},d.fetchMetadata=function(oe){return H(this,void 0,void 0,function*(){const ae=`${oe}/meta`;try{const ie=yield V.request(oe,null,'GET','meta',void 0,{'Content-Type':'application/json'}),se=yield V.parsedResponse(ie);return se&&void 0!==se.verifiable_password_authentication?se:null}catch(ie){return log.error(`fetchMetadata: unable to load metadata from '${ae}' as a fallback`,ie),null}})},d.getEndpointForRepository=function(oe){const ae=z.parse(oe);return'github.com'===ae.hostname?D():`${ae.protocol}//${ae.hostname}/api`},d.getHTMLURL=N,d.getEnterpriseAPIURL=function(oe){const ae=z.parse(oe);return`${ae.protocol}//${ae.hostname}/api/v3`},d.getDotComAPIEndpoint=D,d.getAccountForEndpoint=function(oe,ae){return oe.find((ie)=>ie.endpoint===ae)||null},d.getOAuthAuthorizationURL=function(oe,ae){const ie=N(oe),se=encodeURIComponent(Z.join(' '));return`${ie}/login/oauth/authorize?client_id=${Q}&scope=${se}&state=${ae}`},d.requestOAuthToken=function(oe,ae,ie){return H(this,void 0,void 0,function*(){try{const se=N(oe),de=yield V.request(se,null,'POST','login/oauth/access_token',{client_id:Q,client_secret:Y,code:ie,state:ae}),le=yield V.parsedResponse(de);return le.access_token}catch(se){return log.warn(`requestOAuthToken: failed with endpoint ${oe}`,se),null}})}},function(t,d,A){'use strict';function S(K){if(!D.some((G)=>K.endsWith(G)))return null;K.startsWith('file://')&&(K=N(K));const H=`${K}.map`;if(L.existsSync(H))try{const G=L.readFileSync(H,'utf8');return{url:M.basename(H),map:G}}catch(G){}}function w(K,H){return U.set(K,H),K+H.map((G)=>`\n    at ${G}`).join('')}function O(K){let H=U.get(K);return H||((K.stack||'').toString(),H=U.get(K)),H?B(K,H):K.stack}Object.defineProperty(d,'__esModule',{value:!0});const M=A(0),L=A(1),N=A(34),I=A(45),D=['renderer.js','main.js','shared.js'],U=new WeakMap;let B;d.enableSourceMaps=function(){I.install({environment:'node',handleUncaughtExceptions:!1,retrieveSourceMap:S});const K=Error;B=K.prepareStackTrace,K.prepareStackTrace=w},d.withSourceMappedStack=function(K){return{name:K.name,message:K.message,stack:O(K)}}},function(t,d,A){'use strict';Object.defineProperty(d,'__esModule',{value:!0});const S=A(0),w=A(13);class C{static fromJSON(R){const O=R.gitHubRepository;return O?new C(R.path,R.id,w.GitHubRepository.fromJSON(O),R.missing):new C(R.path,R.id,null,R.missing)}constructor(R,O,M,L){this.path=R,this.gitHubRepository=M,this.name=M&&M.name||S.basename(R),this.id=O,this.missing=L}withGitHubRepository(R){return new C(this.path,this.id,R,this.missing)}withMissing(R){return new C(this.path,this.id,this.gitHubRepository,R)}withPath(R){return new C(R,this.id,this.gitHubRepository,this.missing)}}d.Repository=C},function(t,d,A){function S(z,W,V){var $;return K[W]?$=K[W]:($=G(W),K[W]=$),2===arguments.length?z[$]:(z[$]=V,V)}function w(){return 1}function C(z){if(!(this instanceof C))return new C(z);'number'==typeof z&&(z={max:z}),z||(z={});var W=S(this,'max',z.max);W&&'number'==typeof W&&!(0>=W)||S(this,'max',Infinity);var V=z.length||w;'function'!=typeof V&&(V=w),S(this,'lengthCalculator',V),S(this,'allowStale',z.stale||!1),S(this,'maxAge',z.maxAge||0),S(this,'dispose',z.dispose),this.reset()}function R(z,W,V,$){var J=V.value;M(z,J)&&(N(z,V),!S(z,'allowStale')&&(J=void 0)),J&&W.call($,J.value,J.key,z)}function O(z,W,V){var $=S(z,'cache').get(W);if($){var J=$.value;M(z,J)?(N(z,$),!S(z,'allowStale')&&(J=void 0)):V&&S(z,'lruList').unshiftNode($),J&&(J=J.value)}return J}function M(z,W){if(!W||!W.maxAge&&!S(z,'maxAge'))return!1;var V=!1,$=Date.now()-W.now;return V=W.maxAge?$>W.maxAge:S(z,'maxAge')&&$>S(z,'maxAge'),V}function L(z){if(S(z,'length')>S(z,'max'))for(var W=S(z,'lruList').tail,V;S(z,'length')>S(z,'max')&&null!==W;)V=W.prev,N(z,W),W=V}function N(z,W){if(W){var V=W.value;S(z,'dispose')&&S(z,'dispose').call(this,V.key,V.value),S(z,'length',S(z,'length')-V.length),S(z,'cache').delete(V.key),S(z,'lruList').removeNode(W)}}function I(z,W,V,$,J){this.key=z,this.value=W,this.length=V,this.now=$,this.maxAge=J||0}t.exports=C;var D=A(43),U=A(73),B=A(59),K={},H='function'==typeof Symbol,G;G=H?function(z){return Symbol.for(z)}:function(z){return'_'+z},Object.defineProperty(C.prototype,'max',{set:function(z){z&&'number'==typeof z&&!(0>=z)||(z=Infinity),S(this,'max',z),L(this)},get:function(){return S(this,'max')},enumerable:!0}),Object.defineProperty(C.prototype,'allowStale',{set:function(z){S(this,'allowStale',!!z)},get:function(){return S(this,'allowStale')},enumerable:!0}),Object.defineProperty(C.prototype,'maxAge',{set:function(z){z&&'number'==typeof z&&!(0>z)||(z=0),S(this,'maxAge',z),L(this)},get:function(){return S(this,'maxAge')},enumerable:!0}),Object.defineProperty(C.prototype,'lengthCalculator',{set:function(z){'function'!=typeof z&&(z=w),z!==S(this,'lengthCalculator')&&(S(this,'lengthCalculator',z),S(this,'length',0),S(this,'lruList').forEach(function(W){W.length=S(this,'lengthCalculator').call(this,W.value,W.key),S(this,'length',S(this,'length')+W.length)},this)),L(this)},get:function(){return S(this,'lengthCalculator')},enumerable:!0}),Object.defineProperty(C.prototype,'length',{get:function(){return S(this,'length')},enumerable:!0}),Object.defineProperty(C.prototype,'itemCount',{get:function(){return S(this,'lruList').length},enumerable:!0}),C.prototype.rforEach=function(z,W){W=W||this;for(var V=S(this,'lruList').tail,$;null!==V;)$=V.prev,R(this,z,V,W),V=$},C.prototype.forEach=function(z,W){W=W||this;for(var V=S(this,'lruList').head,$;null!==V;)$=V.next,R(this,z,V,W),V=$},C.prototype.keys=function(){return S(this,'lruList').toArray().map(function(z){return z.key},this)},C.prototype.values=function(){return S(this,'lruList').toArray().map(function(z){return z.value},this)},C.prototype.reset=function(){S(this,'dispose')&&S(this,'lruList')&&S(this,'lruList').length&&S(this,'lruList').forEach(function(z){S(this,'dispose').call(this,z.key,z.value)},this),S(this,'cache',new D),S(this,'lruList',new B),S(this,'length',0)},C.prototype.dump=function(){return S(this,'lruList').map(function(z){if(!M(this,z))return{k:z.key,v:z.value,e:z.now+(z.maxAge||0)}},this).toArray().filter(function(z){return z})},C.prototype.dumpLru=function(){return S(this,'lruList')},C.prototype.inspect=function(z,W){var V='LRUCache {',$=!1,J=S(this,'allowStale');J&&(V+='\n  allowStale: true',$=!0);var X=S(this,'max');X&&X!==Infinity&&($&&(V+=','),V+='\n  max: '+U.inspect(X,W),$=!0);var Q=S(this,'maxAge');Q&&($&&(V+=','),V+='\n  maxAge: '+U.inspect(Q,W),$=!0);var Y=S(this,'lengthCalculator');Y&&Y!==w&&($&&(V+=','),V+='\n  length: '+U.inspect(S(this,'length'),W),$=!0);var Z=!1;return S(this,'lruList').forEach(function(ee){Z?V+=',\n  ':($&&(V+=',\n'),Z=!0,V+='\n  ');var ne=U.inspect(ee.key).split('\n').join('\n  '),te={value:ee.value};ee.maxAge!==Q&&(te.maxAge=ee.maxAge),Y!==w&&(te.length=ee.length),M(this,ee)&&(te.stale=!0),te=U.inspect(te,W).split('\n').join('\n  '),V+=ne+' => '+te}),(Z||$)&&(V+='\n'),V+='}',V},C.prototype.set=function(z,W,V){V=V||S(this,'maxAge');var $=V?Date.now():0,J=S(this,'lengthCalculator').call(this,W,z);if(S(this,'cache').has(z)){if(J>S(this,'max'))return N(this,S(this,'cache').get(z)),!1;var X=S(this,'cache').get(z),Q=X.value;return S(this,'dispose')&&S(this,'dispose').call(this,z,Q.value),Q.now=$,Q.maxAge=V,Q.value=W,S(this,'length',S(this,'length')+(J-Q.length)),Q.length=J,this.get(z),L(this),!0}var Y=new I(z,W,J,$,V);return Y.length>S(this,'max')?(S(this,'dispose')&&S(this,'dispose').call(this,z,W),!1):(S(this,'length',S(this,'length')+Y.length),S(this,'lruList').unshift(Y),S(this,'cache').set(z,S(this,'lruList').head),L(this),!0)},C.prototype.has=function(z){if(!S(this,'cache').has(z))return!1;var W=S(this,'cache').get(z).value;return!M(this,W)},C.prototype.get=function(z){return O(this,z,!0)},C.prototype.peek=function(z){return O(this,z,!1)},C.prototype.pop=function(){var z=S(this,'lruList').tail;return z?(N(this,z),z.value):null},C.prototype.del=function(z){N(this,S(this,'cache').get(z))},C.prototype.load=function(z){this.reset();for(var W=Date.now(),V=z.length-1;0<=V;V--){var $=z[V],J=$.e||0;if(0===J)this.set($.k,$.v);else{var X=J-W;0<X&&this.set($.k,$.v,X)}}},C.prototype.prune=function(){var z=this;S(this,'cache').forEach(function(W,V){O(z,V,!1)})}},function(t){'use strict';t.exports=function(S){S=S||{};var w=S.env||process.env,C=S.platform||'darwin';return'win32'===C?Object.keys(w).filter(function(R){return'PATH'===R.toUpperCase()})[0]||'Path':'PATH'}},function(t,d,A){function S(){this._array=[],this._set=Object.create(null)}var w=A(2),C=Object.prototype.hasOwnProperty;S.fromArray=function(O,M){for(var L=new S,N=0,I=O.length;N<I;N++)L.add(O[N],M);return L},S.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},S.prototype.add=function(O,M){var L=w.toSetString(O),N=C.call(this._set,L),I=this._array.length;(!N||M)&&this._array.push(O),N||(this._set[L]=I)},S.prototype.has=function(O){var M=w.toSetString(O);return C.call(this._set,M)},S.prototype.indexOf=function(O){var M=w.toSetString(O);if(C.call(this._set,M))return this._set[M];throw new Error('"'+O+'" is not in the set.')},S.prototype.at=function(O){if(0<=O&&O<this._array.length)return this._array[O];throw new Error('No element indexed by '+O)},S.prototype.toArray=function(){return this._array.slice()},d.ArraySet=S},function(t,d,A){function S(N){return 0>N?(-N<<1)+1:(N<<1)+0}function w(N){var D=N>>1;return 1==(1&N)?-D:D}var C=A(46),R=5,O=1<<R,M=O-1,L=O;d.encode=function(I){var D='',U,B=S(I);do U=B&M,B>>>=R,0<B&&(U|=L),D+=C.encode(U);while(0<B);return D},d.decode=function(I,D,U){var B=I.length,K=0,H=0,G,z;do{if(D>=B)throw new Error('Expected more digits in base 64 VLQ value.');if(z=C.decode(I.charCodeAt(D++)),-1===z)throw new Error('Invalid base64 digit: '+I.charAt(D-1));G=!!(z&L),z&=M,K+=z<<H,H+=R}while(G);U.value=w(K),U.rest=D}},function(t,d,A){function S(M){M||(M={}),this._file=C.getArg(M,'file',null),this._sourceRoot=C.getArg(M,'sourceRoot',null),this._skipValidation=C.getArg(M,'skipValidation',!1),this._sources=new R,this._names=new R,this._mappings=new O,this._sourcesContents=null}var w=A(11),C=A(2),R=A(10).ArraySet,O=A(48).MappingList;S.prototype._version=3,S.fromSourceMap=function(L){var N=L.sourceRoot,I=new S({file:L.file,sourceRoot:N});return L.eachMapping(function(D){var U={generated:{line:D.generatedLine,column:D.generatedColumn}};null!=D.source&&(U.source=D.source,null!=N&&(U.source=C.relative(N,U.source)),U.original={line:D.originalLine,column:D.originalColumn},null!=D.name&&(U.name=D.name)),I.addMapping(U)}),L.sources.forEach(function(D){var U=L.sourceContentFor(D);null!=U&&I.setSourceContent(D,U)}),I},S.prototype.addMapping=function(L){var N=C.getArg(L,'generated'),I=C.getArg(L,'original',null),D=C.getArg(L,'source',null),U=C.getArg(L,'name',null);this._skipValidation||this._validateMapping(N,I,D,U),null!=D&&(D=D+'',!this._sources.has(D)&&this._sources.add(D)),null!=U&&(U=U+'',!this._names.has(U)&&this._names.add(U)),this._mappings.add({generatedLine:N.line,generatedColumn:N.column,originalLine:null!=I&&I.line,originalColumn:null!=I&&I.column,source:D,name:U})},S.prototype.setSourceContent=function(L,N){var I=L;null!=this._sourceRoot&&(I=C.relative(this._sourceRoot,I)),null==N?this._sourcesContents&&(delete this._sourcesContents[C.toSetString(I)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null)):(!this._sourcesContents&&(this._sourcesContents=Object.create(null)),this._sourcesContents[C.toSetString(I)]=N)},S.prototype.applySourceMap=function(L,N,I){var D=N;if(null==N){if(null==L.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\\\'s "file" property. Both were omitted.');D=L.file}var U=this._sourceRoot;null!=U&&(D=C.relative(U,D));var B=new R,K=new R;this._mappings.unsortedForEach(function(H){if(H.source===D&&null!=H.originalLine){var G=L.originalPositionFor({line:H.originalLine,column:H.originalColumn});null!=G.source&&(H.source=G.source,null!=I&&(H.source=C.join(I,H.source)),null!=U&&(H.source=C.relative(U,H.source)),H.originalLine=G.line,H.originalColumn=G.column,null!=G.name&&(H.name=G.name))}var z=H.source;null==z||B.has(z)||B.add(z);var W=H.name;null==W||K.has(W)||K.add(W)},this),this._sources=B,this._names=K,L.sources.forEach(function(H){var G=L.sourceContentFor(H);null!=G&&(null!=I&&(H=C.join(I,H)),null!=U&&(H=C.relative(U,H)),this.setSourceContent(H,G))},this)},S.prototype._validateMapping=function(L,N,I,D){if(!(L&&'line'in L&&'column'in L&&0<L.line&&0<=L.column&&!N&&!I&&!D)&&!(L&&'line'in L&&'column'in L&&N&&'line'in N&&'column'in N&&0<L.line&&0<=L.column&&0<N.line&&0<=N.column&&I))throw new Error('Invalid mapping: '+JSON.stringify({generated:L,source:I,original:N,name:D}))},S.prototype._serializeMappings=function(){for(var L=0,N=1,I=0,D=0,U=0,B=0,K='',V=this._mappings.toArray(),$=0,J=V.length,H,G,z,W;$<J;$++){if(G=V[$],H='',G.generatedLine!==N)for(L=0;G.generatedLine!==N;)H+=';',N++;else if(0<$){if(!C.compareByGeneratedPositionsInflated(G,V[$-1]))continue;H+=','}H+=w.encode(G.generatedColumn-L),L=G.generatedColumn,null!=G.source&&(W=this._sources.indexOf(G.source),H+=w.encode(W-B),B=W,H+=w.encode(G.originalLine-1-D),D=G.originalLine-1,H+=w.encode(G.originalColumn-I),I=G.originalColumn,null!=G.name&&(z=this._names.indexOf(G.name),H+=w.encode(z-U),U=z)),K+=H}return K},S.prototype._generateSourcesContent=function(L,N){return L.map(function(I){if(!this._sourcesContents)return null;null!=N&&(I=C.relative(N,I));var D=C.toSetString(I);return Object.prototype.hasOwnProperty.call(this._sourcesContents,D)?this._sourcesContents[D]:null},this)},S.prototype.toJSON=function(){var L={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(L.file=this._file),null!=this._sourceRoot&&(L.sourceRoot=this._sourceRoot),this._sourcesContents&&(L.sourcesContent=this._generateSourcesContent(L.sources,L.sourceRoot)),L},S.prototype.toString=function(){return JSON.stringify(this.toJSON())},d.SourceMapGenerator=S},function(t,d,A){'use strict';Object.defineProperty(d,'__esModule',{value:!0});const S=A(14),w=A(62);class C{static fromJSON(R){return new C(R.name,S.Owner.fromJSON(R.owner),R.dbID,R.private,R.fork,R.htmlURL,R.defaultBranch,R.cloneURL)}constructor(R,O,M,L=null,N=null,I=null,D='master',U=null){this.name=R,this.owner=O,this.dbID=M,this.private=L,this.fork=N,this.htmlURL=I,this.defaultBranch=D,this.cloneURL=U}withAPI(R){const O=new C(this.name,this.owner,this.dbID,R.private,R.fork,R.html_url,R.default_branch,R.clone_url);return w.structuralEquals(O,this)?this:O}get endpoint(){return this.owner.endpoint}get fullName(){return`${this.owner.login}/${this.name}`}}d.GitHubRepository=C},function(t,d){'use strict';Object.defineProperty(d,'__esModule',{value:!0});class S{static fromJSON(w){return new S(w.login,w.endpoint)}constructor(w,C){this.login=w,this.endpoint=C}}d.Owner=S},function(t){t.exports=require('child_process')},function(t){t.exports=require('crypto')},function(t){t.exports=require('os')},function(t,d,A){'use strict';function S(O,M,L){w.ipcRenderer.send('log',O,C.formatLogMessage(`[${'shared'}] ${M}`,L))}Object.defineProperty(d,'__esModule',{value:!0});const w=A(3),C=A(66),R=global;R.log={error(O,M){S('error',O,M),console.error(C.formatLogMessage(O,M))},warn(O,M){S('warn',O,M),console.warn(C.formatLogMessage(O,M))},info(O,M){S('info',O,M),console.info(C.formatLogMessage(O,M))},debug(O,M){S('debug',O,M),console.debug(C.formatLogMessage(O,M))}}},function(t,d,A){'use strict';var S=this&&this.__awaiter||function(O,M,L,N){return new(L||(L=Promise))(function(I,D){function U(H){try{K(N.next(H))}catch(G){D(G)}}function B(H){try{K(N['throw'](H))}catch(G){D(G)}}function K(H){H.done?I(H.value):new L(function(G){G(H.value)}).then(U,B)}K((N=N.apply(O,M||[])).next())})};Object.defineProperty(d,'__esModule',{value:!0});const w=A(61),C=A(4);d.AccountsStore=class{constructor(O,M){this.accounts=[],this.dataStore=O,this.secureStore=M,this.loadingPromise=this.loadFromStore()}getAll(){return S(this,void 0,void 0,function*(){return yield this.loadingPromise,this.accounts.slice()})}addAccount(O){return S(this,void 0,void 0,function*(){yield this.loadingPromise,yield this.secureStore.setItem(w.getKeyForAccount(O),O.login,O.token),this.accounts.push(O),this.save()})}removeAccount(O){return S(this,void 0,void 0,function*(){yield this.loadingPromise,yield this.secureStore.deleteItem(w.getKeyForAccount(O),O.login),this.accounts=this.accounts.filter((M)=>M.id!==O.id),this.save()})}map(O){return S(this,void 0,void 0,function*(){yield this.loadingPromise;const M=[];for(const L of this.accounts){const N=yield O(L);M.push(N)}this.accounts=M,this.save()})}loadFromStore(){return S(this,void 0,void 0,function*(){const O=this.dataStore.getItem('users');if(O&&O.length){const M=JSON.parse(O),L=M.map((N)=>S(this,void 0,void 0,function*(){const I=new C.Account(N.login,N.endpoint,'',N.emails,N.avatarURL,N.id,N.name),D=yield this.secureStore.getItem(w.getKeyForAccount(I),N.login);return I.withToken(D||'')}));this.accounts=yield Promise.all(L)}})}save(){const O=this.accounts.map((M)=>M.withToken(''));this.dataStore.setItem('users',JSON.stringify(O))}}},function(t,d,A){'use strict';function S(N){const I=N.name;if(!I)return console.error('Unnamed message sent to shared process:'),void console.error(N);const D=L[I];if(!D)return console.error('No handler found for message:'),void console.error(N);const U=N.guid,B=N.args,K=D(B);K.then((H)=>({result:H,type:'result'})).catch((H)=>{const G={name:H.name,message:H.message,stack:H.stack};return{error:G,type:'error'}}).then((H)=>{M.getAllWindows().forEach((G)=>{G.webContents.send(`shared/response/${U}`,[H])})})}var R=this&&this.__awaiter||function(N,I,D,U){return new(D||(D=Promise))(function(B,K){function H(W){try{z(U.next(W))}catch(V){K(V)}}function G(W){try{z(U['throw'](W))}catch(V){K(V)}}function z(W){W.done?B(W.value):new D(function(V){V(W.value)}).then(H,G)}z((U=U.apply(N,I||[])).next())})};Object.defineProperty(d,'__esModule',{value:!0});const O=A(3),{BrowserWindow:M}=O.remote,L={};d.register=function(N,I){L[N]=I},d.broadcastUpdate=function(N,I){M.getAllWindows().forEach((D)=>R(this,void 0,void 0,function*(){const U=yield I.getRepositories(),B=yield N.getAll();D.webContents.send('shared/did-update',[{state:{accounts:B,repositories:U}}])}))},O.ipcRenderer.on('shared/request',(N,I)=>{S(I[0])})},function(t,d,A){'use strict';Object.defineProperty(d,'__esModule',{value:!0});const S=A(32);class C extends S.default{constructor(R){super(R),this.version(1).stores({repositories:'++id, &path',gitHubRepositories:'++id, name',owners:'++id, login'}),this.version(2).stores({owners:'++id, &[endpoint+login]'})}}d.Database=C},function(t,d,A){'use strict';var S=this&&this.__awaiter||function(L,N,I,D){return new(I||(I=Promise))(function(U,B){function K(z){try{G(D.next(z))}catch(W){B(W)}}function H(z){try{G(D['throw'](z))}catch(W){B(W)}}function G(z){z.done?U(z.value):new I(function(W){W(z.value)}).then(K,H)}G((D=D.apply(L,N||[])).next())})};Object.defineProperty(d,'__esModule',{value:!0});const w=A(14),C=A(13),R=A(7),O=A(63);d.RepositoriesStore=class{constructor(L){this.db=L}getRepositories(){return S(this,void 0,void 0,function*(){const L=[],N=this.db,I=this.db.transaction('r',this.db.repositories,this.db.gitHubRepositories,this.db.owners,function*(){const D=yield N.repositories.toArray();for(const U of D){let B=null;if(U.gitHubRepositoryID){const K=yield N.gitHubRepositories.get(U.gitHubRepositoryID),H=yield N.owners.get(K.ownerID),G=new C.GitHubRepository(K.name,new w.Owner(H.login,H.endpoint),K.id,K.private,K.fork,K.htmlURL,K.defaultBranch,K.cloneURL);B=new R.Repository(U.path,U.id,G,U.missing)}else B=new R.Repository(U.path,U.id,null,U.missing);L.push(B)}});return yield I,L})}addRepository(L){return S(this,void 0,void 0,function*(){let N=null;const I=this.db,D=this.db.transaction('r',this.db.repositories,this.db.gitHubRepositories,this.db.owners,function*(){const B=yield I.repositories.toArray(),K=B.find(($)=>$.path===L);if(void 0!==K){const H=K.id;if(!K.gitHubRepositoryID)return void(N=new R.Repository(L,H,null,!1));const G=yield I.gitHubRepositories.get(K.gitHubRepositoryID),z=yield I.owners.get(G.ownerID),W=new w.Owner(z.login,z.endpoint),V=new C.GitHubRepository(G.name,W,K.gitHubRepositoryID,G.private,G.fork,G.htmlURL,G.defaultBranch,G.cloneURL);N=new R.Repository(L,H,V,!1)}});if(yield D,null!==N)return N;const U=yield this.db.repositories.add({path:L,gitHubRepositoryID:null,missing:!1});return new R.Repository(L,U,null,!1)})}removeRepository(L){return S(this,void 0,void 0,function*(){yield this.db.repositories.delete(L)})}updateRepositoryMissing(L,N){return S(this,void 0,void 0,function*(){const I=L.id;if(!I)return O.fatalError('`updateRepositoryMissing` can only update `missing` for a repository which has been added to the database.');const D=L.withMissing(N),U=D.gitHubRepository?D.gitHubRepository.dbID:null;return yield this.db.repositories.put(Object.assign({},D,{gitHubRepositoryID:U,gitHubRepository:void 0})),D})}updateRepositoryPath(L,N){return S(this,void 0,void 0,function*(){const I=L.id;if(!I)return O.fatalError('`updateRepositoryPath` can only update the path for a repository which has been added to the database.');const D=L.withPath(N),U=D.gitHubRepository?D.gitHubRepository.dbID:null;return yield this.db.repositories.put(Object.assign({},D,{gitHubRepositoryID:U,gitHubRepository:void 0})),D})}updateGitHubRepository(L){return S(this,void 0,void 0,function*(){const N=L.id;if(!N)return O.fatalError('`updateGitHubRepository` can only update a GitHub repository for a repository which has been added to the database.');const I=L.gitHubRepository;if(!I)return O.fatalError('`updateGitHubRepository` can only update a GitHub repository. It cannot remove one.');let D=null;const U=this.db,B=this.db.transaction('rw',this.db.repositories,this.db.gitHubRepositories,this.db.owners,function*(){const K=yield U.repositories.get(N);let H=null,G=null;if(K.gitHubRepositoryID){if(D=K.gitHubRepositoryID,H=yield U.gitHubRepositories.get(K.gitHubRepositoryID),!H)return O.fatalError(`Couldn't look up an existing GitHub repository.`);const W=yield U.owners.get(H.ownerID);G=W.id}else{const W=I.owner,V=yield U.owners.where('[endpoint+login]').equals([W.endpoint,W.login.toLowerCase()]).limit(1).first();G=V?V.id:yield U.owners.add({login:W.login.toLowerCase(),endpoint:W.endpoint})}let z={private:I.private,fork:I.fork,htmlURL:I.htmlURL,name:I.name,ownerID:G,cloneURL:I.cloneURL,defaultBranch:I.defaultBranch};H&&(z=Object.assign({},z,{id:H.id})),D=yield U.gitHubRepositories.put(z),yield U.repositories.update(K.id,{gitHubRepositoryID:D})});return yield B,L.withGitHubRepository(new C.GitHubRepository(I.name,I.owner,D,I.private,I.fork,I.htmlURL,I.defaultBranch,I.cloneURL))})}}},function(t,d,A){'use strict';Object.defineProperty(d,'__esModule',{value:!0});const R=A(39);d.setItem=function(O,M,L){return R.setPassword(O,M,L)},d.getItem=function(O,M){return R.getPassword(O,M)},d.deleteItem=function(O,M){return R.deletePassword(O,M)}},function(t,d,A){'use strict';function I(H){return{message:H.message||`${H}`,name:H.name||`${H.name}`,stack:H.stack||void 0}}Object.defineProperty(d,'__esModule',{value:!0});const B=A(3);d.updateMenuState=function(H){B.ipcRenderer.send('update-menu-state',H)},d.sendReady=function(H){B.ipcRenderer.send('renderer-ready',H)},d.executeMenuItem=function(H){B.ipcRenderer.send('execute-menu-item',{id:H.id})},d.showCertificateTrustDialog=function(H,G){B.ipcRenderer.send('show-certificate-trust-dialog',{certificate:H,message:G})},d.sendWillQuitSync=function(){B.ipcRenderer.sendSync('will-quit')},d.getAppMenu=function(){B.ipcRenderer.send('get-app-menu')};let K=null;d.registerContextualMenuActionDispatcher=function(){B.ipcRenderer.on('contextual-menu-action',(H,G)=>{if(K&&!(G>=K.length)){const z=K[G],W=z.action;W&&(W(),K=null)}})},d.showContextualMenu=function(H){K=H,B.ipcRenderer.send('show-contextual-menu',H)},d.reportUncaughtException=function(H){B.ipcRenderer.send('uncaught-exception',I(H))},d.sendErrorReport=function(H,G={}){B.ipcRenderer.send('send-error-report',{error:I(H),extra:G})}},function(t,d,A){'use strict';function S(O,M,L){var N,I;return N=C(O,M,L),I=w.spawn(N.command,N.args,N.options),R.hookChildProcess(I,N),I}var w=A(15),C=A(27),R=A(26);t.exports=S,t.exports.spawn=S,t.exports._parse=C,t.exports._enoent=R},function(t){'use strict';function C(){return null}t.exports.hookChildProcess=function(O,M){var L},t.exports.verifyENOENT=C,t.exports.notFoundError=function(O,M){var L;return L=new Error(M+' '+O+' ENOENT'),L.code=L.errno='ENOENT',L.syscall=M+' '+O,L}},function(t,d,A){'use strict';var O=A(1),M=A(8),L=A(28),I=new M({max:50,maxAge:30000});t.exports=function(D,U,B){var G,z;return U&&!Array.isArray(U)&&(B=U,U=null),U=U?U.slice(0):[],B=B||{},z=D,!1,{command:D,args:U,options:B,file:G,original:z}}},function(t,d,A){'use strict';var w=A(0),C=A(58),R=A(8),O=new R({max:50,maxAge:30000}),M=new RegExp(/\//);t.exports=function(L,N){var I;if(M.test(L)&&(L=w.resolve(L)),N=!!N,I=O.get(L+'!'+N),O.has(L))return O.get(L);try{I=N?C.sync(L,{pathExt:w.delimiter+(process.env.PATHEXT||'')}):C.sync(L)}catch(D){}return O.set(L+'!'+N,I),I}},function(t,d,A){function S(N){return null===N||N===void 0}function w(N){return N&&'object'==typeof N&&'number'==typeof N.length&&('function'!=typeof N.copy||'function'!=typeof N.slice?!1:0<N.length&&'number'!=typeof N[0]?!1:!0)}function C(N,I,D){var U,B;if(S(N)||S(I))return!1;if(N.prototype!==I.prototype)return!1;if(M(N))return!!M(I)&&(N=R.call(N),I=R.call(I),L(N,I,D));if(w(N)){if(!w(I))return!1;if(N.length!==I.length)return!1;for(U=0;U<N.length;U++)if(N[U]!==I[U])return!1;return!0}try{var K=O(N),H=O(I)}catch(G){return!1}if(K.length!=H.length)return!1;for(K.sort(),H.sort(),U=K.length-1;0<=U;U--)if(K[U]!=H[U])return!1;for(U=K.length-1;0<=U;U--)if(B=K[U],!L(N[B],I[B],D))return!1;return typeof N==typeof I}var R=Array.prototype.slice,O=A(31),M=A(30),L=t.exports=function(N,I,D){return D||(D={}),N===I||(N instanceof Date&&I instanceof Date?N.getTime()===I.getTime():N&&I&&('object'==typeof N||'object'==typeof I)?C(N,I,D):D.strict?N===I:N==I)}},function(t,d){function A(C){return'[object Arguments]'==Object.prototype.toString.call(C)}function S(C){return C&&'object'==typeof C&&'number'==typeof C.length&&Object.prototype.hasOwnProperty.call(C,'callee')&&!Object.prototype.propertyIsEnumerable.call(C,'callee')||!1}var w='[object Arguments]'==function(){return Object.prototype.toString.call(arguments)}();d=t.exports=w?A:S,d.supported=A;d.unsupported=S},function(t,d){function A(S){var w=[];for(var C in S)w.push(C);return w}d=t.exports='function'==typeof Object.keys?Object.keys:A,d.shim=A},function(t){(function(S,w){t.exports=w()})(this,function(){'use strict';function S(ot,at){return'object'==typeof at?(nn(at).forEach(function(st){ot[st]=at[st]}),ot):ot}function w(ot,at){return an.call(ot,at)}function C(ot,at){'function'==typeof at&&(at=at(on(ot))),nn(at).forEach(function(st){R(ot,st,at[st])})}function R(ot,at,st,dt){Object.defineProperty(ot,at,S(st&&w(st,'get')&&'function'==typeof st.get?{get:st.get,set:st.set,configurable:!0}:{value:st,configurable:!0,writable:!0},dt))}function O(ot){return{from:function(at){return ot.prototype=Object.create(at.prototype),R(ot.prototype,'constructor',ot),{extend:C.bind(null,ot.prototype)}}}}function M(ot,at){var st=sn(ot,at),dt;return st||(dt=on(ot))&&M(dt,at)}function L(ot,at,st){return dn.call(ot,at,st)}function N(ot,at){return at(ot)}function I(ot){var at=setTimeout(ot,1e3);clearTimeout(at)}function D(ot){if(!ot)throw new Error('Assertion Failed')}function U(ot){rn.setImmediate?setImmediate(ot):setTimeout(ot,0)}function B(ot,at){return ot.reduce(function(st,dt,lt){var ut=at(dt,lt);return ut&&(st[ut[0]]=ut[1]),st},{})}function K(ot,at){return function(){try{ot.apply(this,arguments)}catch(st){at(st)}}}function H(ot,at,st){try{ot.apply(null,st)}catch(dt){at&&at(dt)}}function G(ot,at){if(w(ot,at))return ot[at];if(!at)return ot;if('string'!=typeof at){for(var st=[],dt=0,lt=at.length,ut;dt<lt;++dt)ut=G(ot,at[dt]),st.push(ut);return st}var ct=at.indexOf('.');if(-1!==ct){var pt=ot[at.substr(0,ct)];return void 0===pt?void 0:G(pt,at.substr(ct+1))}}function z(ot,at,st){if(ot&&void 0!==at&&!('isFrozen'in Object&&Object.isFrozen(ot)))if('string'!=typeof at&&'length'in at){D('string'!=typeof st&&'length'in st);for(var dt=0,lt=at.length;dt<lt;++dt)z(ot,at[dt],st[dt])}else{var ut=at.indexOf('.');if(-1!==ut){var ct=at.substr(0,ut),pt=at.substr(ut+1);if(''===pt)void 0===st?delete ot[ct]:ot[ct]=st;else{var gt=ot[ct];gt||(gt=ot[ct]={}),z(gt,pt,st)}}else void 0===st?delete ot[at]:ot[at]=st}}function V(ot){var at={};for(var st in ot)w(ot,st)&&(at[st]=ot[st]);return at}function $(ot){if(!ot||'object'!=typeof ot)return ot;var at;if(tn(ot)){at=[];for(var st=0,dt=ot.length;st<dt;++st)at.push($(ot[st]))}else if(ot instanceof Date)at=new Date,at.setTime(ot.getTime());else for(var lt in at=ot.constructor?Object.create(ot.constructor.prototype):{},ot)w(ot,lt)&&(at[lt]=$(ot[lt]));return at}function J(ot,at,st,dt){return st=st||{},dt=dt||'',nn(ot).forEach(function(lt){if(!w(at,lt))st[dt+lt]=void 0;else{var ut=ot[lt],ct=at[lt];'object'==typeof ut&&'object'==typeof ct&&ut&&ct&&ut.constructor===ct.constructor?J(ut,ct,st,dt+lt+'.'):ut!==ct&&(st[dt+lt]=at[lt])}}),nn(at).forEach(function(lt){w(ot,lt)||(st[dt+lt]=at[lt])}),st}function X(ot){var at,st,dt,lt;if(1===arguments.length){if(tn(ot))return ot.slice();if(this===cn&&'string'==typeof ot)return[ot];if(lt=un(ot)){for(st=[];dt=lt.next(),!dt.done;)st.push(dt.value);return st}if(null==ot)return[ot];if(at=ot.length,'number'==typeof at){for(st=Array(at);at--;)st[at]=ot[at];return st}return[ot]}for(at=arguments.length,st=Array(at);at--;)st[at]=arguments[at];return st}function Q(ot){return pn.apply([],ot)}function Y(){}function Z(ot){return ot}function ee(ot,at){return null==ot||ot===Z?at:function(st){return at(ot(st))}}function ne(ot,at){return function(){ot.apply(this,arguments),at.apply(this,arguments)}}function te(ot,at){return ot===Y?at:function(){var st=ot.apply(this,arguments);void 0!==st&&(arguments[0]=st);var dt=this.onsuccess,lt=this.onerror;this.onsuccess=null,this.onerror=null;var ut=at.apply(this,arguments);return dt&&(this.onsuccess=this.onsuccess?ne(dt,this.onsuccess):dt),lt&&(this.onerror=this.onerror?ne(lt,this.onerror):lt),void 0===ut?st:ut}}function oe(ot,at){return ot===Y?at:function(){ot.apply(this,arguments);var st=this.onsuccess,dt=this.onerror;this.onsuccess=this.onerror=null,at.apply(this,arguments),st&&(this.onsuccess=this.onsuccess?ne(st,this.onsuccess):st),dt&&(this.onerror=this.onerror?ne(dt,this.onerror):dt)}}function ae(ot,at){return ot===Y?at:function(st){var dt=ot.apply(this,arguments);S(st,dt);var lt=this.onsuccess,ut=this.onerror;this.onsuccess=null,this.onerror=null;var ct=at.apply(this,arguments);return lt&&(this.onsuccess=this.onsuccess?ne(lt,this.onsuccess):lt),ut&&(this.onerror=this.onerror?ne(ut,this.onerror):ut),void 0===dt?void 0===ct?void 0:ct:S(dt,ct)}}function ie(ot,at){return ot===Y?at:function(){return!1!==at.apply(this,arguments)&&ot.apply(this,arguments)}}function se(ot,at){return ot===Y?at:function(){var st=ot.apply(this,arguments);if(st&&'function'==typeof st.then){for(var dt=this,lt=arguments.length,ut=Array(lt);lt--;)ut[lt]=arguments[lt];return st.then(function(){return at.apply(dt,ut)})}return at.apply(this,arguments)}}function de(ot,at){gn=ot,hn=at}function le(){'use strict';if(mn)try{throw le.arguments,new Error}catch(ot){return ot}return new Error}function ue(ot,at){var st=ot.stack;return st?(at=at||0,0===st.indexOf(ot.name)&&(at+=(ot.name+ot.message).split('\n').length),st.split('\n').slice(at).filter(hn).map(function(dt){return'\n'+dt}).join('')):''}function ce(ot,at){return function(){return console.warn(ot+' is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. '+ue(le(),1)),at.apply(this,arguments)}}function pe(ot,at){this._e=le(),this.name=ot,this.message=at}function ge(ot,at){return ot+'. Errors: '+at.map(function(st){return st.toString()}).filter(function(st,dt,lt){return lt.indexOf(st)===dt}).join('\n')}function fe(ot,at,st,dt){this._e=le(),this.failures=at,this.failedKeys=dt,this.successCount=st}function he(ot,at){this._e=le(),this.name='BulkError',this.failures=at,this.message=ge(ot,at)}function ye(ot){function at(pt,gt,ft){if('object'==typeof pt)return st(pt);gt||(gt=ie),ft||(ft=Y);var ht={subscribers:[],fire:ft,subscribe:function(mt){-1===ht.subscribers.indexOf(mt)&&(ht.subscribers.push(mt),ht.fire=gt(ht.fire,mt))},unsubscribe:function(mt){ht.subscribers=ht.subscribers.filter(function(yt){return yt!==mt}),ht.fire=ht.subscribers.reduce(gt,ft)}};return dt[pt]=lt[pt]=ht,ht}function st(pt){nn(pt).forEach(function(gt){var ft=pt[gt];if(tn(ft))at(gt,pt[gt][0],pt[gt][1]);else if('asap'===ft)var ht=at(gt,Z,function(){for(var yt=arguments.length,_t=Array(yt);yt--;)_t[yt]=arguments[yt];ht.subscribers.forEach(function(bt){U(function(){bt.apply(null,_t)})})});else throw new An.InvalidArgument('Invalid event config')})}var dt={},lt=function(pt,gt){if(gt){for(var ft=arguments.length,ht=Array(ft-1);--ft;)ht[ft-1]=arguments[ft];return dt[pt].subscribe.apply(null,ht),ot}return'string'==typeof pt?dt[pt]:void 0};lt.addEventType=at;for(var ut=1,ct=arguments.length;ut<ct;++ut)at(arguments[ut]);return lt}function _e(ot){if('object'!=typeof this)throw new TypeError('Promises must be constructed via new');this._listeners=[],this.onuncatched=Y,this._lib=!1;var at=this._PSD=Bn;if(gn&&(this._stackHolder=le(),this._prev=null,this._numPrev=0,Ce(this,Dn)),'function'!=typeof ot){if(ot!==Cn)throw new TypeError('Not a function');return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&xe(this,this._value))}this._state=null,this._value=null,++at.ref,ve(this,ot)}function be(ot,at,st,dt){this.onFulfilled='function'==typeof ot?ot:null,this.onRejected='function'==typeof at?at:null,this.resolve=st,this.reject=dt,this.psd=Bn}function ve(ot,at){try{at(function(st){if(null===ot._state){if(st===ot)throw new TypeError('A promise cannot be resolved with itself.');var dt=ot._lib&&Pe();st&&'function'==typeof st.then?ve(ot,function(lt,ut){st instanceof _e?st._then(lt,ut):st.then(lt,ut)}):(ot._state=!0,ot._value=st,ke(ot)),dt&&Re()}},xe.bind(null,ot))}catch(st){xe(ot,st)}}function xe(ot,at){if(Tn.push(at),null===ot._state){var st=ot._lib&&Pe();at=jn(at),ot._state=!1,ot._value=at,gn&&null!==at&&'object'==typeof at&&!at._promise&&H(function(){var dt=M(at,'stack');at._promise=ot,R(at,'stack',{get:function(){return Rn?dt&&(dt.get?dt.get.apply(at):dt.value):ot.stack}})}),Le(ot),ke(ot),st&&Re()}}function ke(ot){var at=ot._listeners;ot._listeners=[];for(var st=0,dt=at.length;st<dt;++st)Ae(ot,at[st]);var lt=ot._PSD;--lt.ref||lt.finalize(),0==Kn&&(++Kn,Mn(function(){0==--Kn&&Oe()},[]))}function Ae(ot,at){if(null===ot._state)return void ot._listeners.push(at);var st=ot._state?at.onFulfilled:at.onRejected;if(null===st)return(ot._state?at.resolve:at.reject)(ot._value);var dt=at.psd;++dt.ref,++Kn,Mn(Se,[st,ot,at])}function Se(ot,at,st){var dt=Bn,lt=st.psd;try{lt!==dt&&(Bn=lt),Dn=at;var ut=at._value,ct;at._state?ct=ot(ut):(Tn.length&&(Tn=[]),ct=ot(ut),-1===Tn.indexOf(ut)&&Ne(at)),st.resolve(ct)}catch(pt){st.reject(pt)}finally{lt!==dt&&(Bn=dt),Dn=null,0==--Kn&&Oe(),--lt.ref||lt.finalize()}}function we(ot,at,st){if(at.length===st)return at;var dt='';if(!1===ot._state){var lt=ot._value,ut,ct;null==lt?(ut=lt,ct=''):(ut=lt.name||'Error',ct=lt.message||lt,dt=ue(lt,0)),at.push(ut+(ct?': '+ct:'')+dt)}return gn&&(dt=ue(ot._stackHolder,2),dt&&-1===at.indexOf(dt)&&at.push(dt),ot._prev&&we(ot._prev,at,st)),at}function Ce(ot,at){var st=at?at._numPrev+1:0;st<En&&(ot._prev=at,ot._numPrev=st)}function Ee(){Pe()&&Re()}function Pe(){var ot=Ln;return Ln=!1,Nn=!1,ot}function Re(){var ot,at,st;do for(;0<Fn.length;)for(ot=Fn,Fn=[],st=ot.length,at=0;at<st;++at){var dt=ot[at];dt[0].apply(null,dt[1])}while(0<Fn.length);Ln=!0,Nn=!0}function Oe(){var ot=In;In=[],ot.forEach(function(dt){dt._PSD.onunhandled.call(null,dt._value,dt)});for(var at=qn.slice(0),st=at.length;st;)at[--st]()}function Me(ot){function at(){ot(),qn.splice(qn.indexOf(at),1)}qn.push(at),++Kn,Mn(function(){0==--Kn&&Oe()},[])}function Le(ot){In.some(function(at){return at._value===ot._value})||In.push(ot)}function Ne(ot){for(var at=In.length;at;)if(In[--at]._value===ot._value)return void In.splice(at,1)}function Te(ot){return new _e(Cn,!1,ot)}function De(ot,at){var st=Bn;return function(){var dt=Pe(),lt=Bn;try{return lt!==st&&(Bn=st),ot.apply(this,arguments)}catch(ut){at&&at(ut)}finally{lt!==st&&(Bn=lt),dt&&Re()}}}function je(ot,at,st,dt){var lt=Bn,ut=Object.create(lt);ut.parent=lt,ut.ref=0,ut.global=!1,++lt.ref,ut.finalize=function(){--this.parent.ref||this.parent.finalize()};var ct=Ue(ut,ot,at,st,dt);return 0===ut.ref&&ut.finalize(),ct}function Ue(ot,at,st,dt,lt){var ut=Bn;try{return ot!==ut&&(Bn=ot),at(st,dt,lt)}finally{ot!==ut&&(Bn=ut)}}function Be(ot,at){var st;try{st=at.onuncatched(ot)}catch(ut){}if(!1!==st)try{var lt={promise:at,reason:ot},dt;if(rn.document&&document.createEvent?(dt=document.createEvent('Event'),dt.initEvent(Gn,!0,!0),S(dt,lt)):rn.CustomEvent&&(dt=new CustomEvent(Gn,{detail:lt}),S(dt,lt)),dt&&rn.dispatchEvent&&(dispatchEvent(dt),!rn.PromiseRejectionEvent&&rn.onunhandledrejection))try{rn.onunhandledrejection(dt)}catch(ut){}dt.defaultPrevented||_e.on.error.fire(ot,at)}catch(ut){}}function Fe(ot,at){var st=_e.reject(ot);return at?st.uncaught(at):st}function Ke(ot,at){function dt(hr){this._cfg={version:hr,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function lt(hr,mr,yr){var _r=ir._createTransaction(ar,Qt,Jt);_r.create(mr),_r._completion.catch(yr);var br=_r._reject.bind(_r);je(function(){Bn.trans=_r,0===hr?(nn(Jt).forEach(function(vr){pt(mr,vr,Jt[vr].primKey,Jt[vr].indexes)}),_e.follow(function(){return ir.on.populate.fire(_r)}).catch(br)):ut(hr,_r,mr).catch(br)})}function ut(hr,mr,yr){function _r(){return br.length?_e.resolve(br.shift()(mr.idbtrans)).then(_r):_e.resolve()}var br=[],vr=Xt.filter(function(Ar){return Ar._cfg.version===hr})[0];if(!vr)throw new An.Upgrade('Dexie specification of currently installed DB version is missing');Jt=ir._dbSchema=vr._cfg.dbschema;var xr=!1,kr=Xt.filter(function(Ar){return Ar._cfg.version>hr});return kr.forEach(function(Ar){br.push(function(){var Sr=Jt,wr=Ar._cfg.dbschema;Kt(Sr,yr),Kt(wr,yr),Jt=ir._dbSchema=wr;var Cr=ct(Sr,wr);if(Cr.add.forEach(function(Er){pt(yr,Er[0],Er[1].primKey,Er[1].indexes)}),Cr.change.forEach(function(Er){if(Er.recreate)throw new An.Upgrade('Not yet support for changing primary key');else{var Pr=yr.objectStore(Er.name);Er.add.forEach(function(Rr){ht(Pr,Rr)}),Er.change.forEach(function(Rr){Pr.deleteIndex(Rr.name),ht(Pr,Rr)}),Er.del.forEach(function(Rr){Pr.deleteIndex(Rr)})}}),Ar._cfg.contentUpgrade)return xr=!0,_e.follow(function(){Ar._cfg.contentUpgrade(mr)})}),br.push(function(Sr){if(!xr||!Yn){var wr=Ar._cfg.dbschema;ft(wr,Sr)}})}),_r().then(function(){gt(Jt,yr)})}function ct(hr,mr){var yr={del:[],add:[],change:[]};for(var _r in hr)mr[_r]||yr.del.push(_r);for(_r in mr){var br=hr[_r],vr=mr[_r];if(!br)yr.add.push([_r,vr]);else{var xr={name:_r,def:vr,recreate:!1,del:[],add:[],change:[]};if(br.primKey.src!==vr.primKey.src)xr.recreate=!0,yr.change.push(xr);else{var kr=br.idxByName,Ar=vr.idxByName;for(var Sr in kr)Ar[Sr]||xr.del.push(Sr);for(Sr in Ar){var wr=kr[Sr],Cr=Ar[Sr];wr?wr.src!==Cr.src&&xr.change.push(Cr):xr.add.push(Cr)}(0<xr.del.length||0<xr.add.length||0<xr.change.length)&&yr.change.push(xr)}}}return yr}function pt(hr,mr,yr,_r){var br=hr.db.createObjectStore(mr,yr.keyPath?{keyPath:yr.keyPath,autoIncrement:yr.auto}:{autoIncrement:yr.auto});return _r.forEach(function(vr){ht(br,vr)}),br}function gt(hr,mr){nn(hr).forEach(function(yr){mr.db.objectStoreNames.contains(yr)||pt(mr,yr,hr[yr].primKey,hr[yr].indexes)})}function ft(hr,mr){for(var yr=0,_r;yr<mr.db.objectStoreNames.length;++yr)_r=mr.db.objectStoreNames[yr],null==hr[_r]&&mr.db.deleteObjectStore(_r)}function ht(hr,mr){hr.createIndex(mr.name,mr.keyPath,{unique:mr.unique,multiEntry:mr.multi})}function mt(hr){return ir.on.error.fire(hr)}function yt(hr,mr,yr){if(!rr&&!Bn.letThrough){if(!tr){if(!Wt)return Fe(new An.DatabaseClosed,mt);ir.open().catch(Y)}return dr.then(function(){return yt(hr,mr,yr)})}var _r=ir._createTransaction(hr,mr,Jt);return _r._promise(hr,function(br,vr){je(function(){Bn.trans=_r,yr(br,vr,_r)})}).then(function(br){return _r._completion.then(function(){return br})})}function _t(hr,mr,yr){this.name=hr,this.schema=mr,this.hook=Yt[hr]?Yt[hr].hook:ye(null,{creating:[te,Y],reading:[ee,Z],updating:[ae,Y],deleting:[oe,Y]}),this._collClass=yr||St}function bt(hr,mr,yr){_t.call(this,hr,mr,yr||Ct)}function vt(hr,mr,yr){return(yr?Ve:We)(function(_r){hr.push(_r),mr&&mr()})}function xt(hr,mr,yr,_r,br){return new _e(function(vr,xr){var kr=yr.length,Ar=kr-1;if(0===kr)return vr();if(!_r)for(var Sr=0,wr;Sr<kr;++Sr)wr=hr.delete(yr[Sr]),wr.onerror=De(We(xr)),Sr===Ar&&(wr.onsuccess=De(function(){return vr()}));else{var Er=Ve(xr),Pr=ze(null),Cr;H(function(){for(var Rr=0;Rr<kr;++Rr){Cr={onsuccess:null,onerror:null};var Or=yr[Rr];br.call(Cr,Or[0],Or[1],mr);var Mr=hr.delete(Or[0]);Mr._hookCtx=Cr,Mr.onerror=Er,Mr.onsuccess=Rr===Ar?ze(vr):Pr}},function(Rr){throw Cr.onerror&&Cr.onerror(Rr),Rr})}}).uncaught(mt)}function kt(hr,mr,yr,_r){var br=this;this.db=ir,this.mode=hr,this.storeNames=mr,this.idbtrans=null,this.on=ye(this,'complete','error','abort'),this.parent=_r||null,this.active=!0,this._tables=null,this._reculock=0,this._blockedFuncs=[],this._psd=null,this._dbschema=yr,this._resolve=null,this._reject=null,this._completion=new _e(function(vr,xr){br._resolve=vr,br._reject=xr}).uncaught(mt),this._completion.then(function(){br.on.complete.fire()},function(vr){return br.on.error.fire(vr),br.parent?br.parent._reject(vr):br.active&&br.idbtrans&&br.idbtrans.abort(),br.active=!1,Fe(vr)})}function At(hr,mr,yr){this._ctx={table:hr,index:':id'===mr?null:mr,collClass:hr._collClass,or:yr}}function St(hr,mr){var yr=null,_r=null;if(mr)try{yr=mr()}catch(xr){_r=xr}var br=hr._ctx,vr=br.table;this._ctx={table:vr,index:br.index,isPrimKey:!br.index||vr.schema.primKey.keyPath&&br.index===vr.schema.primKey.name,range:yr,keysOnly:!1,dir:'next',unique:'',algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:Infinity,error:_r,or:br.or,valueMapper:vr.hook.reading.fire}}function wt(hr,mr){return!(hr.filter||hr.algorithm||hr.or)&&(mr?hr.justLimit:!hr.replayFilter)}function Ct(){St.apply(this,arguments)}function Et(hr,mr){return hr._cfg.version-mr._cfg.version}function Pt(hr,mr,yr,_r){mr.forEach(function(br){var vr=ir._tableFactory(yr,_r[br]);hr.forEach(function(xr){br in xr||(xr[br]=vr)})})}function Rt(hr){hr.forEach(function(mr){for(var yr in mr)mr[yr]instanceof _t&&delete mr[yr]})}function Ot(hr,mr,yr,_r,br,vr){var xr=vr?function(Ar,Sr,wr){return yr(vr(Ar),Sr,wr)}:yr,kr=De(xr,br);hr.onerror||(hr.onerror=We(br)),hr.onsuccess=mr?K(function(){var Sr=hr.result;if(Sr){var wr=function(){Sr.continue()};mr(Sr,function(Cr){wr=Cr},_r,br)&&kr(Sr.value,Sr,function(Cr){wr=Cr}),wr()}else _r()},br):K(function(){var Sr=hr.result;if(Sr){var wr=function(){Sr.continue()};kr(Sr.value,Sr,function(Cr){wr=Cr}),wr()}else _r()},br)}function Mt(hr){var mr=[];return hr.split(',').forEach(function(yr){yr=yr.trim();var _r=yr.replace(/([&*]|\+\+)/g,''),br=/^\[/.test(_r)?_r.match(/^\[(.*)\]$/)[1].split('+'):_r;mr.push(new Qe(_r,br||null,/\&/.test(yr),/\*/.test(yr),/\+\+/.test(yr),tn(br),/\./.test(yr)))}),mr}function Lt(hr,mr){return Vt.cmp(hr,mr)}function Nt(hr,mr){return 0>Lt(hr,mr)?hr:mr}function It(hr,mr){return 0<Lt(hr,mr)?hr:mr}function Tt(hr,mr){return Vt.cmp(hr,mr)}function Dt(hr,mr){return Vt.cmp(mr,hr)}function jt(hr,mr){return hr<mr?-1:hr===mr?0:1}function Ut(hr,mr){return hr>mr?-1:hr===mr?0:1}function Bt(hr,mr){return hr?mr?function(){return hr.apply(this,arguments)&&mr.apply(this,arguments)}:hr:mr}function Ft(){if(ir.verno=Zt.version/10,ir._dbSchema=Jt={},Qt=L(Zt.objectStoreNames,0),0!==Qt.length){var hr=Zt.transaction(Ze(Qt),'readonly');Qt.forEach(function(mr){for(var yr=hr.objectStore(mr),_r=yr.keyPath,br=_r&&'string'==typeof _r&&-1!==_r.indexOf('.'),vr=new Qe(_r,_r||'',!1,!1,!!yr.autoIncrement,_r&&'string'!=typeof _r,br),xr=[],kr=0,Ar;kr<yr.indexNames.length;++kr){Ar=yr.index(yr.indexNames[kr]),_r=Ar.keyPath,br=_r&&'string'==typeof _r&&-1!==_r.indexOf('.');var Sr=new Qe(Ar.name,_r,!!Ar.unique,!!Ar.multiEntry,!1,_r&&'string'!=typeof _r,br);xr.push(Sr)}Jt[mr]=new Ye(mr,vr,xr,{})}),Pt([Yt,kt.prototype],nn(Jt),ar,Jt)}}function Kt(hr,mr){for(var yr=mr.db.objectStoreNames,_r=0;_r<yr.length;++_r){var br=yr[_r],vr=mr.objectStore(br);fr='getAll'in vr;for(var xr=0;xr<vr.indexNames.length;++xr){var kr=vr.indexNames[xr],Ar=vr.index(kr).keyPath,Sr='string'==typeof Ar?Ar:'['+L(Ar).join('+')+']';if(hr[br]){var wr=hr[br].idxByName[Sr];wr&&(wr.name=kr)}}}}function qt(hr){ir.on('blocked').fire(hr),Xn.filter(function(mr){return mr.name===ir.name&&mr!==ir&&!mr._vcFired}).map(function(mr){return mr.on('versionchange').fire(hr)})}var Ht=Ke.dependencies,Gt=S({addons:Ke.addons,autoOpen:!0,indexedDB:Ht.indexedDB,IDBKeyRange:Ht.IDBKeyRange},at),zt=Gt.addons,Wt=Gt.autoOpen,Vt=Gt.indexedDB,$t=Gt.IDBKeyRange,Jt=this._dbSchema={},Xt=[],Qt=[],Yt={},Zt=null,nr=null,tr=!1,rr=!1,or='readonly',ar='readwrite',ir=this,dr=new _e(function(hr){sr=hr}),ur=new _e(function(hr,mr){lr=mr}),pr=!0,gr=!!en(Vt),sr,lr,fr;this.version=function(hr){if(Zt||tr)throw new An.Schema('Cannot add version when database is open');this.verno=Math.max(this.verno,hr);var mr=Xt.filter(function(yr){return yr._cfg.version===hr})[0];return mr?mr:(mr=new dt(hr),Xt.push(mr),Xt.sort(Et),mr)},S(dt.prototype,{stores:function(hr){this._cfg.storesSource=this._cfg.storesSource?S(this._cfg.storesSource,hr):hr;var mr={};Xt.forEach(function(_r){S(mr,_r._cfg.storesSource)});var yr=this._cfg.dbschema={};return this._parseStoresSpec(mr,yr),Jt=ir._dbSchema=yr,Rt([Yt,ir,kt.prototype]),Pt([Yt,ir,kt.prototype,this._cfg.tables],nn(yr),ar,yr),Qt=nn(yr),this},upgrade:function(hr){var mr=this;return nt(function(){hr(ir._createTransaction(ar,nn(mr._cfg.dbschema),mr._cfg.dbschema))}),this._cfg.contentUpgrade=hr,this},_parseStoresSpec:function(hr,mr){nn(hr).forEach(function(yr){if(null!==hr[yr]){var _r={},br=Mt(hr[yr]),vr=br.shift();if(vr.multi)throw new An.Schema('Primary key cannot be multi-valued');vr.keyPath&&z(_r,vr.keyPath,vr.auto?0:vr.keyPath),br.forEach(function(xr){if(xr.auto)throw new An.Schema('Only primary key can be marked as autoIncrement (++)');if(!xr.keyPath)throw new An.Schema('Index must have a name and cannot be an empty string');z(_r,xr.keyPath,xr.compound?xr.keyPath.map(function(){return''}):'')}),mr[yr]=new Ye(yr,vr,br,_r)}})}}),this._allTables=Yt,this._tableFactory=function(mr,yr){return mr===or?new _t(yr.name,yr,St):new bt(yr.name,yr)},this._createTransaction=function(hr,mr,yr,_r){return new kt(hr,mr,yr,_r)},this._whenReady=function(hr){return new _e(tt||rr||Bn.letThrough?hr:function(mr,yr){if(!tr){if(!Wt)return void yr(new An.DatabaseClosed);ir.open().catch(Y)}dr.then(function(){hr(mr,yr)})}).uncaught(mt)},this.verno=0,this.open=function(){if(tr||Zt)return dr.then(function(){return nr?Fe(nr,mt):ir});gn&&(ur._stackHolder=le()),tr=!0,nr=null,rr=!1;var hr=sr,mr=null;return _e.race([ur,new _e(function(yr,_r){if(I(function(){return yr()}),0<Xt.length&&(pr=!1),!Vt)throw new An.MissingAPI('indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.');var br=pr?Vt.open(ot):Vt.open(ot,_Mathround(10*ir.verno));if(!br)throw new An.MissingAPI('IndexedDB API not available');br.onerror=De(We(_r)),br.onblocked=De(qt),br.onupgradeneeded=De(function(vr){if(mr=br.transaction,pr&&!ir._allowEmptyDB){br.onerror=$e,mr.abort(),br.result.close();var xr=Vt.deleteDatabase(ot);xr.onsuccess=xr.onerror=De(function(){_r(new An.NoSuchDatabase('Database '+ot+' doesnt exist'))})}else{mr.onerror=De(We(_r));var kr=4611686018427388000<vr.oldVersion?0:vr.oldVersion;lt(kr/10,mr,_r,br)}},_r),br.onsuccess=De(function(){if(mr=null,Zt=br.result,Xn.push(ir),pr)Ft();else if(0<Zt.objectStoreNames.length)try{Kt(Jt,Zt.transaction(Ze(Zt.objectStoreNames),or))}catch(vr){}Zt.onversionchange=De(function(vr){ir._vcFired=!0,ir.on('versionchange').fire(vr)}),gr||Je(function(vr){if(-1===vr.indexOf(ot))return vr.push(ot)}),yr()},_r)})]).then(function(){return Ke.vip(ir.on.ready.fire)}).then(function(){return tr=!1,ir}).catch(function(yr){try{mr&&mr.abort()}catch(_r){}return tr=!1,ir.close(),nr=yr,Fe(nr,mt)}).finally(function(){rr=!0,hr()})},this.close=function(){var hr=Xn.indexOf(ir);if(0<=hr&&Xn.splice(hr,1),Zt){try{Zt.close()}catch(mr){}Zt=null}Wt=!1,nr=new An.DatabaseClosed,tr&&lr(nr),dr=new _e(function(mr){sr=mr}),ur=new _e(function(mr,yr){lr=yr})},this.delete=function(){var hr=0<arguments.length;return new _e(function(mr,yr){function _r(){ir.close();var br=Vt.deleteDatabase(ot);br.onsuccess=De(function(){gr||Je(function(vr){var xr=vr.indexOf(ot);if(0<=xr)return vr.splice(xr,1)}),mr()}),br.onerror=De(We(yr)),br.onblocked=qt}if(hr)throw new An.InvalidArgument('Arguments not allowed in db.delete()');tr?dr.then(_r):_r()}).uncaught(mt)},this.backendDB=function(){return Zt},this.isOpen=function(){return null!==Zt},this.hasFailed=function(){return null!==nr},this.dynamicallyOpened=function(){return pr},this.name=ot,R(this,'tables',{get:function(){return nn(Yt).map(function(hr){return Yt[hr]})}}),this.on=ye(this,'error','populate','blocked','versionchange',{ready:[se,Y]}),this.on.error.subscribe=ce('Dexie.on.error',this.on.error.subscribe),this.on.error.unsubscribe=ce('Dexie.on.error.unsubscribe',this.on.error.unsubscribe),this.on.ready.subscribe=N(this.on.ready.subscribe,function(hr){return function(mr,yr){Ke.vip(function(){rr?(!nr&&_e.resolve().then(mr),yr&&hr(mr)):(hr(mr),!yr&&hr(function _r(){ir.on.ready.unsubscribe(mr),ir.on.ready.unsubscribe(_r)}))})}}),nt(function(){ir.on('populate').fire(ir._createTransaction(ar,Qt,Jt)),ir.on('error').fire(new Error)}),this.transaction=function(hr,mr,yr){function _r(wr){var Cr=Bn;wr(_e.resolve().then(function(){return je(function(){Bn.transless=Bn.transless||Cr;var Er=ir._createTransaction(hr,Sr,Jt,kr);Bn.trans=Er,kr?Er.idbtrans=kr.idbtrans:Er.create();var Pr=Sr.map(function(Or){return Yt[Or]});Pr.push(Er);var Rr;return _e.follow(function(){if(Rr=yr.apply(Er,Pr),Rr)if('function'==typeof Rr.next&&'function'==typeof Rr.throw)Rr=Xe(Rr);else if('function'==typeof Rr.then&&!w(Rr,'_PSD'))throw new An.IncompatiblePromise('Incompatible Promise returned from transaction scope (read more at http://tinyurl.com/znyqjqc). Transaction scope: '+yr.toString())}).uncaught(mt).then(function(){return kr&&Er._resolve(),Er._completion}).then(function(){return Rr}).catch(function(Or){return Er._reject(Or),Fe(Or)})})}))}var br=arguments.length;if(2>br)throw new An.InvalidArgument('Too few arguments');for(var vr=Array(br-1);--br;)vr[br-1]=arguments[br];yr=vr.pop();var xr=Q(vr),kr=Bn.trans;kr&&kr.db===ir&&-1===hr.indexOf('!')||(kr=null);var Ar=-1!==hr.indexOf('?');hr=hr.replace('!','').replace('?','');try{var Sr=xr.map(function(wr){var Cr=wr instanceof _t?wr.name:wr;if('string'!=typeof Cr)throw new TypeError('Invalid table argument to Dexie.transaction(). Only Table or String are allowed');return Cr});if('r'==hr||hr==or)hr=or;else if('rw'==hr||hr==ar)hr=ar;else throw new An.InvalidArgument('Invalid transaction mode: '+hr);if(kr){if(kr.mode===or&&hr===ar)if(Ar)kr=null;else throw new An.SubTransaction('Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY');kr&&Sr.forEach(function(wr){if(kr&&-1===kr.storeNames.indexOf(wr))if(Ar)kr=null;else throw new An.SubTransaction('Table '+wr+' not included in parent transaction.')})}}catch(wr){return kr?kr._promise(null,function(Cr,Er){Er(wr)}):Fe(wr,mt)}return kr?kr._promise(hr,_r,'lock'):ir._whenReady(_r)},this.table=function(hr){if(tt&&pr)return new bt(hr);if(!w(Yt,hr))throw new An.InvalidTable('Table '+hr+' does not exist');return Yt[hr]},C(_t.prototype,{_trans:function(mr,yr,_r){var br=Bn.trans;return br&&br.db===ir?br._promise(mr,yr,_r):yt(mr,[this.name],yr)},_idbstore:function(mr,yr,_r){function br(kr,Ar,Sr){yr(kr,Ar,Sr.idbtrans.objectStore(xr),Sr)}if(tt)return new _e(yr);var vr=Bn.trans,xr=this.name;return vr&&vr.db===ir?vr._promise(mr,br,_r):yt(mr,[this.name],br)},get:function(hr,mr){var yr=this;return this._idbstore(or,function(_r,br,vr){tt&&_r(yr.schema.instanceTemplate);var xr=vr.get(hr);xr.onerror=We(br),xr.onsuccess=De(function(){_r(yr.hook.reading.fire(xr.result))},br)}).then(mr)},where:function(hr){return new At(this,hr)},count:function(hr){return this.toCollection().count(hr)},offset:function(hr){return this.toCollection().offset(hr)},limit:function(hr){return this.toCollection().limit(hr)},reverse:function(){return this.toCollection().reverse()},filter:function(hr){return this.toCollection().and(hr)},each:function(hr){return this.toCollection().each(hr)},toArray:function(hr){return this.toCollection().toArray(hr)},orderBy:function(hr){return new this._collClass(new At(this,hr))},toCollection:function(){return new this._collClass(new At(this))},mapToClass:function(hr,mr){this.schema.mappedClass=hr;var yr=Object.create(hr.prototype);mr&&He(yr,mr),this.schema.instanceTemplate=yr;var _r=function(br){if(!br)return br;var vr=Object.create(hr.prototype);for(var xr in br)if(w(br,xr))try{vr[xr]=br[xr]}catch(kr){}return vr};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=_r,this.hook('reading',_r),hr},defineClass:function(hr){return this.mapToClass(Ke.defineClass(hr),hr)}}),O(bt).from(_t).extend({bulkDelete:function(hr){return this.hook.deleting.fire===Y?this._idbstore(ar,function(mr,yr,_r,br){mr(xt(_r,br,hr,!1,Y))}):this.where(':id').anyOf(hr).delete().then(function(){})},bulkPut:function(hr,mr){var yr=this;return this._idbstore(ar,function(_r,br,vr){if(!vr.keyPath&&!yr.schema.primKey.auto&&!mr)throw new An.InvalidArgument('bulkPut() with non-inbound keys requires keys array in second argument');if(vr.keyPath&&mr)throw new An.InvalidArgument('bulkPut(): keys argument invalid on tables with inbound keys');if(mr&&mr.length!==hr.length)throw new An.InvalidArgument('Arguments objects and keys must have the same length');if(0===hr.length)return _r();var xr=function(Lr){0===Ar.length?_r(Lr):br(new he(yr.name+'.bulkPut(): '+Ar.length+' of '+wr+' operations failed',Ar))},Ar=[],wr=hr.length,Cr=yr,kr,Sr;if(yr.hook.creating.fire===Y&&yr.hook.updating.fire===Y){Sr=vt(Ar);for(var Er=0,Pr=hr.length;Er<Pr;++Er)kr=mr?vr.put(hr[Er],mr[Er]):vr.put(hr[Er]),kr.onerror=Sr;kr.onerror=vt(Ar,xr),kr.onsuccess=Ge(xr)}else{var Rr=mr||vr.keyPath&&hr.map(function(Lr){return G(Lr,vr.keyPath)}),Or=Rr&&B(Rr,function(Lr,Nr){return null!=Lr&&[Lr,hr[Nr]]}),Mr=Rr?Cr.where(':id').anyOf(Rr.filter(function(Lr){return null!=Lr})).modify(function(){this.value=Or[this.primKey],Or[this.primKey]=null}).catch(fe,function(Lr){Ar=Lr.failures}).then(function(){for(var Lr=[],Nr=mr&&[],Ir=Rr.length-1,Tr;0<=Ir;--Ir)Tr=Rr[Ir],(null==Tr||Or[Tr])&&(Lr.push(hr[Ir]),mr&&Nr.push(Tr),null!=Tr&&(Or[Tr]=null));return Lr.reverse(),mr&&Nr.reverse(),Cr.bulkAdd(Lr,Nr)}).then(function(Lr){var Nr=Rr[Rr.length-1];return null==Nr?Lr:Nr}):Cr.bulkAdd(hr);Mr.then(xr).catch(he,function(Lr){Ar=Ar.concat(Lr.failures),xr()}).catch(br)}},'locked')},bulkAdd:function(hr,mr){var yr=this,_r=this.hook.creating.fire;return this._idbstore(ar,function(br,vr,xr,kr){function Ar(Nr){0===wr.length?br(Nr):vr(new he(yr.name+'.bulkAdd(): '+wr.length+' of '+Pr+' operations failed',wr))}if(!xr.keyPath&&!yr.schema.primKey.auto&&!mr)throw new An.InvalidArgument('bulkAdd() with non-inbound keys requires keys array in second argument');if(xr.keyPath&&mr)throw new An.InvalidArgument('bulkAdd(): keys argument invalid on tables with inbound keys');if(mr&&mr.length!==hr.length)throw new An.InvalidArgument('Arguments objects and keys must have the same length');if(0===hr.length)return br();var wr=[],Pr=hr.length,Sr,Cr,Er;if(_r!==Y){var Rr=xr.keyPath,Or;Cr=vt(wr,null,!0),Er=ze(null),H(function(){for(var Nr=0,Ir=hr.length;Nr<Ir;++Nr){Or={onerror:null,onsuccess:null};var Tr=mr&&mr[Nr],Dr=hr[Nr],jr=mr?Tr:Rr?G(Dr,Rr):void 0,Ur=_r.call(Or,jr,Dr,kr);null==jr&&null!=Ur&&(Rr?(Dr=$(Dr),z(Dr,Rr,Ur)):Tr=Ur),Sr=null==Tr?xr.add(Dr):xr.add(Dr,Tr),Sr._hookCtx=Or,Nr<Ir-1&&(Sr.onerror=Cr,Or.onsuccess&&(Sr.onsuccess=Er))}},function(Nr){throw Or.onerror&&Or.onerror(Nr),Nr}),Sr.onerror=vt(wr,Ar,!0),Sr.onsuccess=ze(Ar)}else{Cr=vt(wr);for(var Mr=0,Lr=hr.length;Mr<Lr;++Mr)Sr=mr?xr.add(hr[Mr],mr[Mr]):xr.add(hr[Mr]),Sr.onerror=Cr;Sr.onerror=vt(wr,Ar),Sr.onsuccess=Ge(Ar)}})},add:function(hr,mr){var yr=this.hook.creating.fire;return this._idbstore(ar,function(_r,br,vr,xr){var kr={onsuccess:null,onerror:null};if(yr!==Y){var Ar=null==mr?vr.keyPath?G(hr,vr.keyPath):void 0:mr,Sr=yr.call(kr,Ar,hr,xr);null==Ar&&null!=Sr&&(vr.keyPath?z(hr,vr.keyPath,Sr):mr=Sr)}try{var wr=null==mr?vr.add(hr):vr.add(hr,mr);wr._hookCtx=kr,wr.onerror=Ve(br),wr.onsuccess=ze(function(Cr){var Er=vr.keyPath;Er&&z(hr,Er,Cr),_r(Cr)})}catch(Cr){throw kr.onerror&&kr.onerror(Cr),Cr}})},put:function(hr,mr){var yr=this,_r=this.hook.creating.fire,br=this.hook.updating.fire;return _r!==Y||br!==Y?this._trans(ar,function(vr,xr,kr){var Ar=void 0===mr?yr.schema.primKey.keyPath&&G(hr,yr.schema.primKey.keyPath):mr;null==Ar?yr.add(hr).then(vr,xr):(kr._lock(),hr=$(hr),yr.where(':id').equals(Ar).modify(function(){this.value=hr}).then(function(Sr){return 0===Sr?yr.add(hr,mr):Ar}).finally(function(){kr._unlock()}).then(vr,xr))}):this._idbstore(ar,function(vr,xr,kr){var Ar=void 0===mr?kr.put(hr):kr.put(hr,mr);Ar.onerror=We(xr),Ar.onsuccess=function(Sr){var wr=kr.keyPath;wr&&z(hr,wr,Sr.target.result),vr(Ar.result)}})},'delete':function(hr){return this.hook.deleting.subscribers.length?this.where(':id').equals(hr).delete():this._idbstore(ar,function(mr,yr,_r){var br=_r.delete(hr);br.onerror=We(yr),br.onsuccess=function(){mr(br.result)}})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(ar,function(hr,mr,yr){var _r=yr.clear();_r.onerror=We(mr),_r.onsuccess=function(){hr(_r.result)}})},update:function(hr,mr){if('object'!=typeof mr||tn(mr))throw new An.InvalidArgument('Modifications must be an object.');if('object'==typeof hr&&!tn(hr)){nn(mr).forEach(function(_r){z(hr,_r,mr[_r])});var yr=G(hr,this.schema.primKey.keyPath);return void 0===yr?Fe(new An.InvalidArgument('Given object does not contain its primary key'),mt):this.where(':id').equals(yr).modify(mr)}return this.where(':id').equals(hr).modify(mr)}}),C(kt.prototype,{_lock:function(){return D(!Bn.global),++this._reculock,1!==this._reculock||Bn.global||(Bn.lockOwnerFor=this),this},_unlock:function(){if(D(!Bn.global),0==--this._reculock)for(Bn.global||(Bn.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var hr=this._blockedFuncs.shift();try{Ue(hr[1],hr[0])}catch(mr){}}return this},_locked:function(){return this._reculock&&Bn.lockOwnerFor!==this},create:function(hr){var mr=this;if(D(!this.idbtrans),!hr&&!Zt)switch(nr&&nr.name){case'DatabaseClosedError':throw new An.DatabaseClosed(nr);case'MissingAPIError':throw new An.MissingAPI(nr.message,nr);default:throw new An.OpenFailed(nr);}if(!this.active)throw new An.TransactionInactive;return D(null===this._completion._state),hr=this.idbtrans=hr||Zt.transaction(Ze(this.storeNames),this.mode),hr.onerror=De(function(yr){$e(yr),mr._reject(hr.error)}),hr.onabort=De(function(yr){$e(yr),mr.active&&mr._reject(new An.Abort),mr.active=!1,mr.on('abort').fire(yr)}),hr.oncomplete=De(function(){mr.active=!1,mr._resolve()}),this},_promise:function(hr,mr,yr){var _r=this,br=_r._locked()?new _e(function(vr,xr){_r._blockedFuncs.push([function(){_r._promise(hr,mr,yr).then(vr,xr)},Bn])}):je(function(){var vr=_r.active?new _e(function(xr,kr){if(hr===ar&&_r.mode!==ar)throw new An.ReadOnly('Transaction is readonly');!_r.idbtrans&&hr&&_r.create(),yr&&_r._lock(),mr(xr,kr,_r)}):Fe(new An.TransactionInactive);return _r.active&&yr&&vr.finally(function(){_r._unlock()}),vr});return br._lib=!0,br.uncaught(mt)},abort:function(){this.active&&this._reject(new An.Abort),this.active=!1},tables:{get:ce('Transaction.tables',function(){return B(this.storeNames,function(hr){return[hr,Yt[hr]]})},'Use db.tables()')},complete:ce('Transaction.complete()',function(hr){return this.on('complete',hr)}),error:ce('Transaction.error()',function(hr){return this.on('error',hr)}),table:ce('Transaction.table()',function(hr){if(-1===this.storeNames.indexOf(hr))throw new An.InvalidTable('Table '+hr+' not in transaction');return Yt[hr]})}),C(At.prototype,function(){function hr(xr,kr,Ar){var Sr=xr instanceof At?new xr._ctx.collClass(xr):xr;return Sr._ctx.error=Ar?new Ar(kr):new TypeError(kr),Sr}function mr(xr){return new xr._ctx.collClass(xr,function(){return $t.only('')}).limit(0)}function yr(xr){return'next'===xr?function(kr){return kr.toUpperCase()}:function(kr){return kr.toLowerCase()}}function _r(xr){return'next'===xr?function(kr){return kr.toLowerCase()}:function(kr){return kr.toUpperCase()}}function br(xr,kr,Ar,Sr,wr,Cr){for(var Er=_Mathmin(xr.length,Sr.length),Pr=-1,Rr=0,Or;Rr<Er;++Rr){if(Or=kr[Rr],Or!==Sr[Rr])return 0>wr(xr[Rr],Ar[Rr])?xr.substr(0,Rr)+Ar[Rr]+Ar.substr(Rr+1):0>wr(xr[Rr],Sr[Rr])?xr.substr(0,Rr)+Sr[Rr]+Ar.substr(Rr+1):0<=Pr?xr.substr(0,Pr)+kr[Pr]+Ar.substr(Pr+1):null;0>wr(xr[Rr],Or)&&(Pr=Rr)}return Er<Sr.length&&'next'===Cr?xr+Ar.substr(xr.length):Er<xr.length&&'prev'===Cr?xr.substr(0,Ar.length):0>Pr?null:xr.substr(0,Pr)+Sr[Pr]+Ar.substr(Pr+1)}function vr(xr,kr,Ar,Sr){function wr(Dr){Cr=yr(Dr),Er=_r(Dr),Pr='next'===Dr?jt:Ut;var jr=Ar.map(function(Ur){return{lower:Er(Ur),upper:Cr(Ur)}}).sort(function(Ur,Br){return Pr(Ur.lower,Br.lower)});Rr=jr.map(function(Ur){return Ur.upper}),Or=jr.map(function(Ur){return Ur.lower}),Mr=Dr,Lr='next'===Dr?'':Sr}var Nr=Ar.length,Cr,Er,Pr,Rr,Or,Mr,Lr;if(!Ar.every(function(Dr){return'string'==typeof Dr}))return hr(xr,Jn);wr('next');var Ir=new xr._ctx.collClass(xr,function(){return $t.bound(Rr[0],Or[Nr-1]+Sr)});Ir._ondirectionchange=function(Dr){wr(Dr)};var Tr=0;return Ir._addAlgorithm(function(Dr,jr,Ur){var Br=Dr.key;if('string'!=typeof Br)return!1;var Fr=Er(Br);if(kr(Fr,Or,Tr))return!0;for(var Kr=null,qr=Tr,Hr;qr<Nr;++qr)Hr=br(Br,Fr,Rr[qr],Or[qr],Pr,Mr),null===Hr&&null==Kr?Tr=qr+1:(null==Kr||0<Pr(Kr,Hr))&&(Kr=Hr);return null===Kr?jr(Ur):jr(function(){Dr.continue(Kr+Lr)}),!1}),Ir}return{between:function(xr,kr,Ar,Sr){Ar=!1!==Ar,Sr=!0===Sr;try{return 0<Lt(xr,kr)||0===Lt(xr,kr)&&(Ar||Sr)&&!(Ar&&Sr)?mr(this):new this._ctx.collClass(this,function(){return $t.bound(xr,kr,!Ar,!Sr)})}catch(wr){return hr(this,$n)}},equals:function(xr){return new this._ctx.collClass(this,function(){return $t.only(xr)})},above:function(xr){return new this._ctx.collClass(this,function(){return $t.lowerBound(xr,!0)})},aboveOrEqual:function(xr){return new this._ctx.collClass(this,function(){return $t.lowerBound(xr)})},below:function(xr){return new this._ctx.collClass(this,function(){return $t.upperBound(xr,!0)})},belowOrEqual:function(xr){return new this._ctx.collClass(this,function(){return $t.upperBound(xr)})},startsWith:function(xr){return'string'==typeof xr?this.between(xr,xr+Wn,!0,!0):hr(this,Jn)},startsWithIgnoreCase:function(xr){return''===xr?this.startsWith(xr):vr(this,function(kr,Ar){return 0===kr.indexOf(Ar[0])},[xr],Wn)},equalsIgnoreCase:function(xr){return vr(this,function(kr,Ar){return kr===Ar[0]},[xr],'')},anyOfIgnoreCase:function(){var xr=X.apply(cn,arguments);return 0===xr.length?mr(this):vr(this,function(kr,Ar){return-1!==Ar.indexOf(kr)},xr,'')},startsWithAnyOfIgnoreCase:function(){var xr=X.apply(cn,arguments);return 0===xr.length?mr(this):vr(this,function(kr,Ar){return Ar.some(function(Sr){return 0===kr.indexOf(Sr)})},xr,Wn)},anyOf:function(){var xr=X.apply(cn,arguments),kr=Tt;try{xr.sort(kr)}catch(wr){return hr(this,$n)}if(0===xr.length)return mr(this);var Ar=new this._ctx.collClass(this,function(){return $t.bound(xr[0],xr[xr.length-1])});Ar._ondirectionchange=function(wr){kr='next'===wr?Tt:Dt,xr.sort(kr)};var Sr=0;return Ar._addAlgorithm(function(wr,Cr,Er){for(var Pr=wr.key;0<kr(Pr,xr[Sr]);)if(++Sr,Sr===xr.length)return Cr(Er),!1;return 0===kr(Pr,xr[Sr])||(Cr(function(){wr.continue(xr[Sr])}),!1)}),Ar},notEqual:function(xr){return this.inAnyRange([[-Infinity,xr],[xr,Vn]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var xr=X.apply(cn,arguments);if(0===xr.length)return new this._ctx.collClass(this);try{xr.sort(Tt)}catch(Ar){return hr(this,$n)}var kr=xr.reduce(function(Ar,Sr){return Ar?Ar.concat([[Ar[Ar.length-1][1],Sr]]):[[-Infinity,Sr]]},null);return kr.push([xr[xr.length-1],Vn]),this.inAnyRange(kr,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(xr,kr){function Ar(Dr,jr){for(var Ur=0,Br=Dr.length,Fr;Ur<Br;++Ur)if(Fr=Dr[Ur],0>Lt(jr[0],Fr[1])&&0<Lt(jr[1],Fr[0])){Fr[0]=Nt(Fr[0],jr[0]),Fr[1]=It(Fr[1],jr[1]);break}return Ur===Br&&Dr.push(jr),Dr}function Sr(Dr,jr){return Rr(Dr[0],jr[0])}function wr(Dr){return!Lr(Dr)&&!Nr(Dr)}var Cr=this._ctx;if(0===xr.length)return mr(this);if(!xr.every(function(Dr){return void 0!==Dr[0]&&void 0!==Dr[1]&&0>=Tt(Dr[0],Dr[1])}))return hr(this,'First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower',An.InvalidArgument);var Er=!kr||!1!==kr.includeLowers,Pr=kr&&!0===kr.includeUppers,Rr=Tt,Or;try{Or=xr.reduce(Ar,[]),Or.sort(Sr)}catch(Dr){return hr(this,$n)}var Mr=0,Lr=Pr?function(Dr){return 0<Tt(Dr,Or[Mr][1])}:function(Dr){return 0<=Tt(Dr,Or[Mr][1])},Nr=Er?function(Dr){return 0<Dt(Dr,Or[Mr][0])}:function(Dr){return 0<=Dt(Dr,Or[Mr][0])},Ir=Lr,Tr=new Cr.collClass(this,function(){return $t.bound(Or[0][0],Or[Or.length-1][1],!Er,!Pr)});return Tr._ondirectionchange=function(Dr){'next'===Dr?(Ir=Lr,Rr=Tt):(Ir=Nr,Rr=Dt),Or.sort(Sr)},Tr._addAlgorithm(function(Dr,jr,Ur){for(var Br=Dr.key;Ir(Br);)if(++Mr,Mr===Or.length)return jr(Ur),!1;return!!wr(Br)||(0===Lt(Br,Or[Mr][1])||0===Lt(Br,Or[Mr][0])?!1:(jr(function(){Rr===Tt?Dr.continue(Or[Mr][0]):Dr.continue(Or[Mr][1])}),!1))}),Tr},startsWithAnyOf:function(){var xr=X.apply(cn,arguments);return xr.every(function(kr){return'string'==typeof kr})?0===xr.length?mr(this):this.inAnyRange(xr.map(function(kr){return[kr,kr+Wn]})):hr(this,'startsWithAnyOf() only works with strings')}}}),C(St.prototype,function(){function hr(kr,Ar){kr.filter=Bt(kr.filter,Ar)}function mr(kr,Ar,Sr){var wr=kr.replayFilter;kr.replayFilter=wr?function(){return Bt(wr(),Ar())}:Ar,kr.justLimit=Sr&&!wr}function yr(kr,Ar){kr.isMatch=Bt(kr.isMatch,Ar)}function _r(kr,Ar){if(kr.isPrimKey)return Ar;var Sr=kr.table.schema.idxByName[kr.index];if(!Sr)throw new An.Schema('KeyPath '+kr.index+' on object store '+Ar.name+' is not indexed');return Ar.index(Sr.name)}function br(kr,Ar){var Sr=_r(kr,Ar);return kr.keysOnly&&'openKeyCursor'in Sr?Sr.openKeyCursor(kr.range||null,kr.dir+kr.unique):Sr.openCursor(kr.range||null,kr.dir+kr.unique)}function vr(kr,Ar,Sr,wr,Cr){var Er=kr.replayFilter?Bt(kr.filter,kr.replayFilter()):kr.filter;kr.or?function(){function Pr(){2==++Mr&&Sr()}function Rr(Lr,Nr,Ir){if(!Er||Er(Nr,Ir,Pr,wr)){var Tr=Nr.primaryKey.toString();w(Or,Tr)||(Or[Tr]=!0,Ar(Lr,Nr,Ir))}}var Or={},Mr=0;kr.or._iterate(Rr,Pr,wr,Cr),Ot(br(kr,Cr),kr.algorithm,Rr,Pr,wr,!kr.keysOnly&&kr.valueMapper)}():Ot(br(kr,Cr),Bt(kr.algorithm,Er),Ar,Sr,wr,!kr.keysOnly&&kr.valueMapper)}function xr(kr){return kr.table.schema.instanceTemplate}return{_read:function(kr,Ar){var Sr=this._ctx;return Sr.error?Sr.table._trans(null,function(Cr,Er){Er(Sr.error)}):Sr.table._idbstore(or,kr).then(Ar)},_write:function(kr){var Ar=this._ctx;return Ar.error?Ar.table._trans(null,function(wr,Cr){Cr(Ar.error)}):Ar.table._idbstore(ar,kr,'locked')},_addAlgorithm:function(kr){var Ar=this._ctx;Ar.algorithm=Bt(Ar.algorithm,kr)},_iterate:function(kr,Ar,Sr,wr){return vr(this._ctx,kr,Ar,Sr,wr)},clone:function(kr){var Ar=Object.create(this.constructor.prototype),Sr=Object.create(this._ctx);return kr&&S(Sr,kr),Ar._ctx=Sr,Ar},raw:function(){return this._ctx.valueMapper=null,this},each:function(kr){var Ar=this._ctx;if(tt){var Sr=xr(Ar),wr=Ar.table.schema.primKey.keyPath,Cr=G(Sr,Ar.index?Ar.table.schema.idxByName[Ar.index].keyPath:wr),Er=G(Sr,wr);kr(Sr,{key:Cr,primaryKey:Er})}return this._read(function(Pr,Rr,Or){vr(Ar,kr,Pr,Rr,Or)})},count:function(kr){if(tt)return _e.resolve(0).then(kr);var Ar=this._ctx;if(wt(Ar,!0))return this._read(function(wr,Cr,Er){var Pr=_r(Ar,Er),Rr=Ar.range?Pr.count(Ar.range):Pr.count();Rr.onerror=We(Cr),Rr.onsuccess=function(Or){wr(_Mathmin(Or.target.result,Ar.limit))}},kr);var Sr=0;return this._read(function(wr,Cr,Er){vr(Ar,function(){return++Sr,!1},function(){wr(Sr)},Cr,Er)},kr)},sortBy:function(kr,Ar){function Sr(Or,Mr){return Mr?Sr(Or[Cr[Mr]],Mr-1):Or[Er]}function wr(Or,Mr){var Lr=Sr(Or,Pr),Nr=Sr(Mr,Pr);return Lr<Nr?-Rr:Lr>Nr?Rr:0}var Cr=kr.split('.').reverse(),Er=Cr[0],Pr=Cr.length-1,Rr='next'===this._ctx.dir?1:-1;return this.toArray(function(Or){return Or.sort(wr)}).then(Ar)},toArray:function(kr){var Ar=this._ctx;return this._read(function(Sr,wr,Cr){if(tt&&Sr([xr(Ar)]),fr&&'next'===Ar.dir&&wt(Ar,!0)&&0<Ar.limit){var Er=Ar.table.hook.reading.fire,Pr=_r(Ar,Cr),Rr=Ar.limit<Infinity?Pr.getAll(Ar.range,Ar.limit):Pr.getAll(Ar.range);Rr.onerror=We(wr),Rr.onsuccess=Er===Z?Ge(Sr):De(Ge(function(Mr){try{Sr(Mr.map(Er))}catch(Lr){wr(Lr)}}))}else{var Or=[];vr(Ar,function(Mr){Or.push(Mr)},function(){Sr(Or)},wr,Cr)}},kr)},offset:function(kr){var Ar=this._ctx;return 0>=kr?this:(Ar.offset+=kr,wt(Ar)?mr(Ar,function(){var Sr=kr;return function(wr,Cr){return 0===Sr||(1===Sr?(--Sr,!1):(Cr(function(){wr.advance(Sr),Sr=0}),!1))}}):mr(Ar,function(){var Sr=kr;return function(){return 0>--Sr}}),this)},limit:function(kr){return this._ctx.limit=_Mathmin(this._ctx.limit,kr),mr(this._ctx,function(){var Ar=kr;return function(Sr,wr,Cr){return 0>=--Ar&&wr(Cr),0<=Ar}},!0),this},until:function(kr,Ar){var Sr=this._ctx;return tt&&kr(xr(Sr)),hr(this._ctx,function(wr,Cr,Er){return!kr(wr.value)||(Cr(Er),Ar)}),this},first:function(kr){return this.limit(1).toArray(function(Ar){return Ar[0]}).then(kr)},last:function(kr){return this.reverse().first(kr)},filter:function(kr){return tt&&kr(xr(this._ctx)),hr(this._ctx,function(Ar){return kr(Ar.value)}),yr(this._ctx,kr),this},and:function(kr){return this.filter(kr)},or:function(kr){return new At(this._ctx.table,kr,this)},reverse:function(){return this._ctx.dir='prev'===this._ctx.dir?'next':'prev',this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(kr){var Ar=this._ctx;return Ar.keysOnly=!Ar.isMatch,this.each(function(Sr,wr){kr(wr.key,wr)})},eachUniqueKey:function(kr){return this._ctx.unique='unique',this.eachKey(kr)},eachPrimaryKey:function(kr){var Ar=this._ctx;return Ar.keysOnly=!Ar.isMatch,this.each(function(Sr,wr){kr(wr.primaryKey,wr)})},keys:function(kr){var Ar=this._ctx;Ar.keysOnly=!Ar.isMatch;var Sr=[];return this.each(function(wr,Cr){Sr.push(Cr.key)}).then(function(){return Sr}).then(kr)},primaryKeys:function(kr){var Ar=this._ctx;if(fr&&'next'===Ar.dir&&wt(Ar,!0)&&0<Ar.limit)return this._read(function(wr,Cr,Er){var Pr=_r(Ar,Er),Rr=Ar.limit<Infinity?Pr.getAllKeys(Ar.range,Ar.limit):Pr.getAllKeys(Ar.range);Rr.onerror=We(Cr),Rr.onsuccess=Ge(wr)}).then(kr);Ar.keysOnly=!Ar.isMatch;var Sr=[];return this.each(function(wr,Cr){Sr.push(Cr.primaryKey)}).then(function(){return Sr}).then(kr)},uniqueKeys:function(kr){return this._ctx.unique='unique',this.keys(kr)},firstKey:function(kr){return this.limit(1).keys(function(Ar){return Ar[0]}).then(kr)},lastKey:function(kr){return this.reverse().firstKey(kr)},distinct:function(){var kr=this._ctx,Ar=kr.index&&kr.table.schema.idxByName[kr.index];if(!Ar||!Ar.multi)return this;var Sr={};return hr(this._ctx,function(wr){var Cr=wr.primaryKey.toString(),Er=w(Sr,Cr);return Sr[Cr]=!0,!Er}),this}}}),O(Ct).from(St).extend({modify:function(hr){var mr=this,yr=this._ctx,_r=yr.table.hook,br=_r.updating.fire,vr=_r.deleting.fire;return tt&&'function'==typeof hr&&hr.call({value:yr.table.schema.instanceTemplate},yr.table.schema.instanceTemplate),this._write(function(xr,kr,Ar,Sr){function Cr(Ur){return Ur&&(Tr.push(Ur),Dr.push(jr)),kr(new fe('Error modifying one or more objects',Tr,Nr,Dr))}function Er(){Ir&&Nr+Tr.length===Lr&&(0<Tr.length?Cr():xr(Nr))}var Pr;if('function'==typeof hr)Pr=br===Y&&vr===Y?hr:function(Ur){var Br=$(Ur);if(!1===hr.call(this,Ur,this))return!1;if(!w(this,'value'))vr.call(this,this.primKey,Ur,Sr);else{var Fr=J(Br,this.value),Kr=br.call(this,Fr,this.primKey,Br,Sr);Kr&&(Ur=this.value,nn(Kr).forEach(function(qr){z(Ur,qr,Kr[qr])}))}};else if(br===Y){var Rr=nn(hr),Or=Rr.length;Pr=function(Ur){for(var Br=!1,Fr=0;Fr<Or;++Fr){var Kr=Rr[Fr],qr=hr[Kr];G(Ur,Kr)!==qr&&(z(Ur,Kr,qr),Br=!0)}return Br}}else{var Mr=hr;hr=V(Mr),Pr=function(Ur){var Br=!1,Fr=br.call(this,hr,this.primKey,$(Ur),Sr);return Fr&&S(hr,Fr),nn(hr).forEach(function(Kr){var qr=hr[Kr];G(Ur,Kr)!==qr&&(z(Ur,Kr,qr),Br=!0)}),Fr&&(hr=V(Mr)),Br}}var Lr=0,Nr=0,Ir=!1,Tr=[],Dr=[],jr=null;mr.clone().raw()._iterate(function(Ur,Br){function Fr(Hr){return Tr.push(Hr),Dr.push(Kr.primKey),Er(),!0}jr=Br.primaryKey;var Kr={primKey:Br.primaryKey,value:Ur,onsuccess:null,onerror:null};if(!1!==Pr.call(Kr,Ur,Kr)){var qr=!w(Kr,'value');++Lr,H(function(){var Hr=qr?Br.delete():Br.update(Kr.value);Hr._hookCtx=Kr,Hr.onerror=Ve(Fr),Hr.onsuccess=ze(function(){++Nr,Er()})},Fr)}else Kr.onsuccess&&Kr.onsuccess(Kr.value)},function(){Ir=!0,Er()},Cr,Ar)})},'delete':function(){var hr=this,mr=this._ctx,yr=mr.range,_r=mr.table.hook.deleting.fire,br=_r!==Y;if(!br&&wt(mr)&&(mr.isPrimKey&&!Zn||!yr))return this._write(function(xr,kr,Ar){var Sr=We(kr),wr=yr?Ar.count(yr):Ar.count();wr.onerror=Sr,wr.onsuccess=function(){var Cr=wr.result;H(function(){var Er=yr?Ar.delete(yr):Ar.clear();Er.onerror=Sr,Er.onsuccess=function(){return xr(Cr)}},function(Er){return kr(Er)})}});var vr=br?2e3:1e4;return this._write(function(xr,kr,Ar,Sr){var wr=0,Cr=hr.clone({keysOnly:!mr.isMatch&&!br}).distinct().limit(vr).raw(),Er=[],Pr=function(){return Cr.each(br?function(Rr,Or){Er.push([Or.primaryKey,Or.value])}:function(Rr,Or){Er.push(Or.primaryKey)}).then(function(){return br?Er.sort(function(Rr,Or){return Tt(Rr[0],Or[0])}):Er.sort(Tt),xt(Ar,Sr,Er,br,_r)}).then(function(){var Rr=Er.length;return wr+=Rr,Er=[],Rr<vr?wr:Pr()})};xr(Pr())})}}),S(this,{Collection:St,Table:_t,Transaction:kt,Version:dt,WhereClause:At,WriteableCollection:Ct,WriteableTable:bt}),function(){ir.on('versionchange',function(hr){0<hr.newVersion?console.warn('Another connection wants to upgrade database \''+ir.name+'\'. Closing db now to resume the upgrade.'):console.warn('Another connection wants to delete database \''+ir.name+'\'. Closing db now to resume the delete request.'),ir.close()}),ir.on('blocked',function(hr){!hr.newVersion||hr.newVersion<hr.oldVersion?console.warn('Dexie.delete(\''+ir.name+'\') was blocked'):console.warn('Upgrade \''+ir.name+'\' blocked by other connection holding version '+hr.oldVersion/10)})}(),zt.forEach(function(hr){hr(ir)})}function qe(ot){if('function'==typeof ot)return new ot;if(tn(ot))return[qe(ot[0])];if(ot&&'object'==typeof ot){var at={};return He(at,ot),at}return ot}function He(ot,at){return nn(at).forEach(function(st){var dt=qe(at[st]);ot[st]=dt}),ot}function Ge(ot){return function(at){ot(at.target.result)}}function ze(ot){return De(function(at){var st=at.target,dt=st.result,lt=st._hookCtx,ut=lt&&lt.onsuccess;ut&&ut(dt),ot&&ot(dt)},ot)}function We(ot){return function(at){return $e(at),ot(at.target.error),!1}}function Ve(ot){return De(function(at){var st=at.target,dt=st.error,lt=st._hookCtx,ut=lt&&lt.onerror;return ut&&ut(dt),$e(at),ot(dt),!1})}function $e(ot){ot.stopPropagation&&ot.stopPropagation(),ot.preventDefault&&ot.preventDefault()}function Je(ot){var st=Ke.dependencies.localStorage,at;if(!st)return ot([]);try{at=JSON.parse(st.getItem('Dexie.DatabaseNames')||'[]')}catch(dt){at=[]}ot(at)&&st.setItem('Dexie.DatabaseNames',JSON.stringify(at))}function Xe(ot){function at(ct){return function(pt){var gt=ct(pt),ft=gt.value;return gt.done?ft:ft&&'function'==typeof ft.then?ft.then(lt,ut):tn(ft)?_e.all(ft).then(lt,ut):lt(ft)}}var st=function(ct){return ot.next(ct)},lt=at(st),ut=at(function(ct){return ot.throw(ct)});return at(st)()}function Qe(ot,at,st,dt,lt,ut,ct){this.name=ot,this.keyPath=at,this.unique=st,this.multi=dt,this.auto=lt,this.compound=ut,this.dotted=ct;var pt='string'==typeof at?at:at&&'['+[].join.call(at,'+')+']';this.src=(st?'&':'')+(dt?'*':'')+(lt?'++':'')+pt}function Ye(ot,at,st,dt){this.name=ot,this.primKey=at||new Qe,this.indexes=st||[new Qe],this.instanceTemplate=dt,this.mappedClass=null,this.idxByName=B(st,function(lt){return[lt.name,lt]})}function Ze(ot){return 1===ot.length?ot[0]:ot}function en(ot){var at=ot&&(ot.getDatabaseNames||ot.webkitGetDatabaseNames);return at&&at.bind(ot)}var nn=Object.keys,tn=Array.isArray,rn='undefined'==typeof self?'undefined'==typeof window?global:window:self,on=Object.getPrototypeOf,an={}.hasOwnProperty,sn=Object.getOwnPropertyDescriptor,dn=[].slice,ln='undefined'!=typeof Symbol&&Symbol.iterator,un=ln?function(ot){var at;return null!=ot&&(at=ot[ln])&&at.apply(ot)}:function(){return null},cn={},pn=[].concat,gn='undefined'!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),hn=function(){return!0},mn=!new Error('').stack,_n=['Unknown','Constraint','Data','TransactionInactive','ReadOnly','Version','NotFound','InvalidState','InvalidAccess','Abort','Timeout','QuotaExceeded','Syntax','DataClone'],bn=['Modify','Bulk','OpenFailed','VersionChange','Schema','Upgrade','InvalidTable','MissingAPI','NoSuchDatabase','InvalidArgument','SubTransaction','Unsupported','Internal','DatabaseClosed','IncompatiblePromise'].concat(_n),vn={VersionChanged:'Database version changed by other database connection',DatabaseClosed:'Database has been closed',Abort:'Transaction aborted',TransactionInactive:'Transaction has already completed or failed'};O(pe).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+': '+this.message+ue(this._e,2))}},toString:function(){return this.name+': '+this.message}}),O(fe).from(pe),O(he).from(pe);var xn=bn.reduce(function(ot,at){return ot[at]=at+'Error',ot},{}),An=bn.reduce(function(ot,at){function st(lt,ut){this._e=le(),this.name=dt,lt?'string'==typeof lt?(this.message=lt,this.inner=ut||null):'object'==typeof lt&&(this.message=lt.name+' '+lt.message,this.inner=lt):(this.message=vn[at]||dt,this.inner=null)}var dt=at+'Error';return O(st).from(pe),ot[at]=st,ot},{});An.Syntax=SyntaxError,An.Type=TypeError,An.Range=RangeError;var Sn=_n.reduce(function(ot,at){return ot[at+'Error']=An[at],ot},{}),wn=bn.reduce(function(ot,at){return-1===['Syntax','Type','Range'].indexOf(at)&&(ot[at+'Error']=An[at]),ot},{});wn.ModifyError=fe,wn.DexieError=pe,wn.BulkError=he;var Cn={},En=100,Rn=!1,On=rn.setImmediate?setImmediate.bind(null,Ee):rn.MutationObserver?function(){var ot=document.createElement('div');new MutationObserver(function(){Ee(),ot=null}).observe(ot,{attributes:!0}),ot.setAttribute('i','1')}:function(){setTimeout(Ee,0)},Mn=function(ot,at){Fn.push([ot,at]),Nn&&(On(),Nn=!1)},Ln=!0,Nn=!0,In=[],Tn=[],Dn=null,jn=Z,Bn={global:!0,ref:0,unhandleds:[],onunhandled:Be,finalize:function(){this.unhandleds.forEach(function(ot){try{Be(ot[0],ot[1])}catch(at){}})}},Fn=[],Kn=0,qn=[];C(_e.prototype,{then:function(ot,at){var st=this,dt=new _e(function(lt,ut){Ae(st,new be(ot,at,lt,ut))});return gn&&(!this._prev||null===this._state)&&Ce(dt,this),dt},_then:function(ot,at){Ae(this,new be(null,null,ot,at))},catch:function(ot){if(1===arguments.length)return this.then(null,ot);var at=arguments[0],st=arguments[1];return'function'==typeof at?this.then(null,function(dt){return dt instanceof at?st(dt):Te(dt)}):this.then(null,function(dt){return dt&&dt.name===at?st(dt):Te(dt)})},finally:function(ot){return this.then(function(at){return ot(),at},function(at){return ot(),Te(at)})},uncaught:function(ot){var at=this;return this.onuncatched=ie(this.onuncatched,ot),!1===this._state&&-1===In.indexOf(this)&&In.some(function(st,dt,lt){return st._value===at._value&&(lt[dt]=at)}),this},stack:{get:function(){if(this._stack)return this._stack;try{Rn=!0;var ot=we(this,[],20),at=ot.join('\nFrom previous: ');return null!==this._state&&(this._stack=at),at}finally{Rn=!1}}}}),C(_e,{all:function(){var ot=X.apply(null,arguments);return new _e(function(at,st){0===ot.length&&at([]);var dt=ot.length;ot.forEach(function(lt,ut){return _e.resolve(lt).then(function(ct){ot[ut]=ct,--dt||at(ot)},st)})})},resolve:function(ot){return ot instanceof _e?ot:ot&&'function'==typeof ot.then?new _e(function(at,st){ot.then(at,st)}):new _e(Cn,!0,ot)},reject:Te,race:function(){var ot=X.apply(null,arguments);return new _e(function(at,st){ot.map(function(dt){return _e.resolve(dt).then(at,st)})})},PSD:{get:function(){return Bn},set:function(ot){return Bn=ot}},newPSD:je,usePSD:Ue,scheduler:{get:function(){return Mn},set:function(ot){Mn=ot}},rejectionMapper:{get:function(){return jn},set:function(ot){jn=ot}},follow:function(ot){return new _e(function(at,st){return je(function(dt,lt){var ut=Bn;ut.unhandleds=[],ut.onunhandled=lt,ut.finalize=ne(function(){var ct=this;Me(function(){0===ct.unhandleds.length?dt():lt(ct.unhandleds[0])})},ut.finalize),ot()},at,st)})},on:ye(null,{error:[ie,function(ot){console.warn('Unhandled rejection: '+(ot.stack||ot))}]})});var Hn=_e.on.error;Hn.subscribe=ce('Promise.on(\'error\')',Hn.subscribe),Hn.unsubscribe=ce('Promise.on(\'error\').unsubscribe',Hn.unsubscribe);var Gn='unhandledrejection';I(function(){Mn=function(ot,at){setTimeout(function(){ot.apply(null,at)},0)}});var zn='1.5.1',Wn='\uFFFF',Vn=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(ot){return Wn}}(),$n='Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.',Jn='String expected.',Xn=[],Qn='undefined'!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Yn=Qn,Zn=Qn,et=function(ot){return!/(dexie\.js|dexie\.min\.js)/.test(ot)};de(gn,et);var nt=function(){},tt=!1,rt=rn.idbModules&&rn.idbModules.shimIndexedDB?rn.idbModules:{};return C(Ke,wn),C(Ke,{delete:function(ot){var at=new Ke(ot),st=at.delete();return st.onblocked=function(dt){return at.on('blocked',dt),this},st},exists:function(ot){return new Ke(ot).open().then(function(at){return at.close(),!0}).catch(Ke.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(ot){return new _e(function(at,st){var dt=en(indexedDB);if(dt){var lt=dt();lt.onsuccess=function(ut){at(L(ut.target.result,0))},lt.onerror=We(st)}else Je(function(ut){return at(ut),!1})}).then(ot)},defineClass:function(ot){return function(st){st?S(this,st):tt&&He(this,ot)}},applyStructure:He,ignoreTransaction:function(ot){return Bn.trans?Ue(Bn.transless,ot):ot()},vip:function(ot){return je(function(){return Bn.letThrough=!0,ot()})},async:function(ot){return function(){try{var at=Xe(ot.apply(this,arguments));return at&&'function'==typeof at.then?at:_e.resolve(at)}catch(st){return Fe(st)}}},spawn:function(ot,at,st){try{var dt=Xe(ot.apply(st,at||[]));return dt&&'function'==typeof dt.then?dt:_e.resolve(dt)}catch(lt){return Fe(lt)}},currentTransaction:{get:function(){return Bn.trans||null}},Promise:_e,debug:{get:function(){return gn},set:function(ot){de(ot,'dexie'===ot?function(){return!0}:et)}},derive:O,extend:S,props:C,override:N,Events:ye,events:{get:ce(function(){return ye})},getByKeyPath:G,setByKeyPath:z,delByKeyPath:function(ot,at){'string'==typeof at?z(ot,at,void 0):'length'in at&&[].map.call(at,function(st){z(ot,st,void 0)})},shallowClone:V,deepClone:$,getObjectDiff:J,asap:U,maxKey:Vn,addons:[],connections:Xn,MultiModifyError:An.Modify,errnames:xn,IndexSpec:Qe,TableSchema:Ye,dependencies:{indexedDB:rt.shimIndexedDB||rn.indexedDB||rn.mozIndexedDB||rn.webkitIndexedDB||rn.msIndexedDB,IDBKeyRange:rt.IDBKeyRange||rn.IDBKeyRange||rn.webkitIDBKeyRange},semVer:zn,version:zn.split('.').map(function(ot){return parseInt(ot)}).reduce(function(ot,at,st){return ot+at/Math.pow(10,2*st)}),fakeAutoComplete:nt,default:Ke}),H(function(){Ke.dependencies.localStorage=null==('undefined'!=typeof chrome&&null!==chrome?chrome.storage:void 0)?rn.localStorage:null}),_e.rejectionMapper=function(ot,at){if(!ot||ot instanceof pe||ot instanceof TypeError||ot instanceof SyntaxError||!ot.name||!Sn[ot.name])return ot;var st=new Sn[ot.name](at||ot.message,ot);return'stack'in ot&&R(st,'stack',{get:function(){return this.inner.stack}}),st},I(function(){Ke.fakeAutoComplete=nt=I,Ke.fake=tt=!0}),Ke})},function(t,d,A){'use strict';function S(K,H,G){var z;return G&&!0===G.__winShell?(delete G.__winShell,z={command:K,args:H,options:G,file:K,original:K}):z=M._parse(K,H,G),G=N({maxBuffer:B,stripEof:!0,preferLocal:!0,encoding:'utf8'},z.options),G.preferLocal&&(G.env=N({},G.env||process.env),G.env[U]=I({cwd:G.cwd,path:G.env[U]})),{cmd:z.command,args:z.args,opts:G}}function w(K,H){var G=H.input;null===G||void 0===G||(D(G)?G.pipe(K.stdin):K.stdin.end(G))}function C(K,H){return K.stripEof&&(H=L(H)),H}function R(K,H,G){var z,W;return G=N({},G),(z='/bin/sh',W=['-c',H]),G.shell&&(z=G.shell),K(z,W,G)}var O=A(15),M=A(25),L=A(53),N=A(42),I=A(41),D=A(35),U=A(9)(),B=10485760;t.exports=function(K,H,G){var W=new Promise(function(V,$){var J=S(K,H,G);z=O.execFile(J.cmd,J.args,J.opts,function(X,Q,Y){return X?(X.stdout=Q,X.stderr=Y,X.message+=Q,void $(X)):void V({stdout:C(J.opts,Q),stderr:C(J.opts,Y)})}),M._enoent.hookChildProcess(z,J),w(z,J.opts)}),z;return z.then=W.then.bind(W),z.catch=W.catch.bind(W),z},t.exports.stdout=function(){return t.exports.apply(null,arguments).then(function(K){return K.stdout})},t.exports.stderr=function(){return t.exports.apply(null,arguments).then(function(K){return K.stderr})},t.exports.shell=function(K,H){return R(t.exports,K,H)},t.exports.spawn=function(K,H,G){var z=S(K,H,G),W=O.spawn(z.cmd,z.args,z.opts);return M._enoent.hookChildProcess(W,z),W},t.exports.sync=function(K,H,G){var z=S(K,H,G);if(D(z.opts.input))throw new TypeError('The `input` option cannot be a stream in sync mode');var W=O.spawnSync(z.cmd,z.args,z.opts);return z.opts.stripEof&&(W.stdout=L(W.stdout),W.stderr=L(W.stderr)),W},t.exports.shellSync=function(K,H){return R(t.exports.sync,K,H)}},function(t,d,A){var w=A(0).sep||'/';t.exports=function(C){if('string'!=typeof C||7>=C.length||'file://'!=C.substring(0,7))throw new TypeError('must pass in a file:// URI to convert to a file path');var R=unescape(C.substring(7)),O=R.indexOf('/'),M=R.substring(0,O),L=R.substring(O+1);return'localhost'==M&&(M=''),M&&(M=w+w+M),L=L.replace(/^(.+)\|/,'$1:'),'\\'==w&&(L=L.replace(/\//g,'\\')),/^.+\:/.test(L)||(L=w+L),M+L}},function(t){'use strict';var S=t.exports=function(w){return null!==w&&'object'==typeof w&&'function'==typeof w.pipe};S.writable=function(w){return S(w)&&!1!==w.writable&&'function'==typeof w._write&&'object'==typeof w._writableState},S.readable=function(w){return S(w)&&!1!==w.readable&&'function'==typeof w._read&&'object'==typeof w._readableState},S.duplex=function(w){return S.writable(w)&&S.readable(w)},S.transform=function(w){return S.duplex(w)&&'function'==typeof w._transform&&'object'==typeof w._transformState}},function(t,d,A){function S(O,M,L){if('function'==typeof M&&(L=M,M={}),!L){if('function'!=typeof Promise)throw new TypeError('callback not provided');return new Promise(function(N,I){S(O,M||{},function(D,U){D?I(D):N(U)})})}R(O,M||{},function(N,I){N&&('EACCES'===N.code||M&&M.ignoreErrors)&&(N=null,I=!1),L(N,I)})}var C=A(1),R;R=global.TESTING_WINDOWS?A(38):A(37),t.exports=S,S.sync=function(O,M){try{return R.sync(O,M||{})}catch(L){if(M&&M.ignoreErrors||'EACCES'===L.code)return!1;throw L}}},function(t,d,A){function S(M,L,N){O.stat(M,function(I,D){N(I,!I&&C(D,L))})}function C(M,L){return M.isFile()&&R(M,L)}function R(M,L){var N=M.mode,I=M.uid,D=M.gid,U=L.uid===void 0?process.getuid&&process.getuid():L.uid,B=L.gid===void 0?process.getgid&&process.getgid():L.gid,K=parseInt('100',8),H=parseInt('010',8),G=parseInt('001',8);return N&G||N&H&&D===B||N&K&&I===U||N&(K|H)&&0===U}t.exports=S,S.sync=function(M,L){return C(O.statSync(M),L)};var O=A(1)},function(t,d,A){function S(M,L){var N=void 0===L.pathExt?process.env.PATHEXT:L.pathExt;if(!N)return!0;if(N=N.split(';'),-1!==N.indexOf(''))return!0;for(var I=0,D;I<N.length;I++)if(D=N[I].toLowerCase(),D&&M.substr(-D.length).toLowerCase()===D)return!0;return!1}function w(M,L,N){return(M.isSymbolicLink()||M.isFile())&&S(L,N)}function C(M,L,N){O.stat(M,function(I,D){N(I,!I&&w(D,M,L))})}t.exports=C,C.sync=function(M,L){return w(O.statSync(M),M,L)};var O=A(1)},function(t,d,A){function S(R,O){if(!R||0>=R.length)throw new Error(O+' is required.')}function w(R){if('function'==typeof R)return new Promise(function(O,M){R((L,N)=>{L?M(L):O(N)})});throw new Error('Callback required')}var C=A(70);t.exports={getPassword:function(R,O){return S(R,'Service'),S(O,'Account'),w((M)=>C.getPassword(R,O,M))},setPassword:function(R,O,M){return S(R,'Service'),S(O,'Account'),S(M,'Password'),w((L)=>C.setPassword(R,O,M,L))},deletePassword:function(R,O){return S(R,'Service'),S(O,'Account'),w((M)=>C.deletePassword(R,O,M))},findPassword:function(R){return S(R,'Service'),w((O)=>C.findPassword(R,O))}}},function(t){'use strict';t.exports=function(S,w){w=w||{};var C=w.cacheKey||function(O){return 1===arguments.length&&(null===O||void 0===O||'function'!=typeof O&&'object'!=typeof O)?O:JSON.stringify(arguments)},R=function(){var O=R.__cache__,M=C.apply(null,arguments);if(O.has(M)){var L=O.get(M);if('number'!=typeof w.maxAge||Date.now()<L.maxAge)return L.data}var N=S.apply(null,arguments);return O.set(M,{data:N,maxAge:Date.now()+(w.maxAge||0)}),N};return R.displayName=S.displayName||S.name,R.__cache__=w.cache||new Map,R}},function(t,d,A){'use strict';var S=A(0),w=A(9);t.exports=function(C){C=C||{};for(var O=S.resolve(C.cwd||'.'),M=[],R;R!==O;)M.push(S.join(O,'node_modules/.bin')),R=O,O=S.resolve(O,'..');return M.push(S.dirname(process.execPath)),M.concat(C.path||process.env[w()]).join(S.delimiter)}},function(t){'use strict';function S(M){if(null===M||M===void 0)throw new TypeError('Object.assign cannot be called with null or undefined');return Object(M)}var C=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var M=new String('abc');if(M[5]='de','5'===Object.getOwnPropertyNames(M)[0])return!1;for(var L={},N=0;10>N;N++)L['_'+String.fromCharCode(N)]=N;var I=Object.getOwnPropertyNames(L).map(function(U){return L[U]});if('0123456789'!==I.join(''))return!1;var D={};return'abcdefghijklmnopqrst'.split('').forEach(function(U){D[U]=U}),'abcdefghijklmnopqrst'===Object.keys(Object.assign({},D)).join('')}catch(U){return!1}}()?Object.assign:function(M){for(var I=S(M),U=1,N,D;U<arguments.length;U++){for(var B in N=Object(arguments[U]),N)R.call(N,B)&&(I[B]=N[B]);if(C){D=C(N);for(var K=0;K<D.length;K++)O.call(N,D[K])&&(I[D[K]]=N[D[K]])}}return I}},function(t,d,A){'pseudomap'===process.env.npm_package_name&&'test'===process.env.npm_lifecycle_script&&(process.env.TEST_PSEUDOMAP='true'),t.exports='function'!=typeof Map||process.env.TEST_PSEUDOMAP?A(44):Map},function(t){function A(M){if(!(this instanceof A))throw new TypeError('Constructor PseudoMap requires \'new\'');if(this.clear(),M)if(M instanceof A||'function'==typeof Map&&M instanceof Map)M.forEach(function(L,N){this.set(N,L)},this);else if(Array.isArray(M))M.forEach(function(L){this.set(L[0],L[1])},this);else throw new TypeError('invalid argument')}function S(M,L){return M===L||M!==M&&L!==L}function w(M,L,N){this.key=M,this.value=L,this._index=N}function C(M,L){for(var N=0,I='_'+L,D=I;O.call(M,D);D=I+N++)if(S(M[D].key,L))return M[D]}function R(M,L,N){for(var I=0,D='_'+L,U=D;O.call(M,U);U=D+I++)if(S(M[U].key,L))return void(M[U].value=N);M.size++,M[U]=new w(L,N,U)}var O=Object.prototype.hasOwnProperty;t.exports=A,A.prototype.forEach=function(M,L){L=L||this,Object.keys(this._data).forEach(function(N){'size'!==N&&M.call(L,this._data[N].value,this._data[N].key)},this)},A.prototype.has=function(M){return!!C(this._data,M)},A.prototype.get=function(M){var L=C(this._data,M);return L&&L.value},A.prototype.set=function(M,L){R(this._data,M,L)},A.prototype.delete=function(M){var L=C(this._data,M);L&&(delete this._data[L._index],this._data.size--)},A.prototype.clear=function(){var M=Object.create(null);M.size=0,Object.defineProperty(this,'_data',{value:M,enumerable:!1,configurable:!0,writable:!1})},Object.defineProperty(A.prototype,'size',{get:function(){return this._data.size},set:function(){},enumerable:!0,configurable:!0}),A.prototype.values=A.prototype.keys=A.prototype.entries=function(){throw new Error('iterators are not implemented in this version')}},function(t,d,A){function S(){return!('browser'!=X)||'node'!=X&&'undefined'!=typeof window&&'function'==typeof XMLHttpRequest&&!(window.require&&window.module&&window.process&&'renderer'===window.process.type)}function w(){return'object'==typeof process&&null!==process&&'function'==typeof process.on}function C(ae){return function(ie){for(var se=0,de;se<ae.length;se++)if(de=ae[se](ie),de)return de;return null}}function R(ae,ie){if(!ae)return ie;var se=z.dirname(ae),de=/^\w+:\/\/[^\/]*/.exec(se),le=de?de[0]:'';return le+z.resolve(se.slice(le.length),ie)}function O(ae){var ie;if(S())try{var se=new XMLHttpRequest;se.open('GET',ae,!1),se.send(null),ie=4===se.readyState?se.responseText:null;var de=se.getResponseHeader('SourceMap')||se.getResponseHeader('X-SourceMap');if(de)return de}catch(pe){}ie=te(ae);for(var le=/(?:\/\/[@#][ \t]+sourceMappingURL=([^\s'"]+?)[ \t]*$)|(?:\/\*[@#][ \t]+sourceMappingURL=([^\*]+?)[ \t]*(?:\*\/)[ \t]*$)/mg,ue,ce;ce=le.exec(ie);)ue=ce;return ue?ue[1]:null}function M(ae){var ie=Y[ae.source];if(!ie){var se=oe(ae.source);se?(ie=Y[ae.source]={url:se.url,map:new G(se.map)},ie.map.sourcesContent&&ie.map.sources.forEach(function(le,ue){var ce=ie.map.sourcesContent[ue];if(ce){var pe=R(ie.url,le);Q[pe]=ce}})):ie=Y[ae.source]={url:null,map:null}}if(ie&&ie.map){var de=ie.map.originalPositionFor(ae);if(null!==de.source)return de.source=R(ie.url,de.source),de}return ae}function L(ae){var ie=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(ae);if(ie){var se=M({source:ie[2],line:+ie[3],column:ie[4]-1});return'eval at '+ie[1]+' ('+se.source+':'+se.line+':'+(se.column+1)+')'}return ie=/^eval at ([^(]+) \((.+)\)$/.exec(ae),ie?'eval at '+ie[1]+' ('+L(ie[2])+')':ae}function N(){var ie='',ae;if(this.isNative())ie='native';else{ae=this.getScriptNameOrSourceURL(),!ae&&this.isEval()&&(ie=this.getEvalOrigin(),ie+=', '),ie+=ae?ae:'<anonymous>';var se=this.getLineNumber();if(null!=se){ie+=':'+se;var de=this.getColumnNumber();de&&(ie+=':'+de)}}var le='',ue=this.getFunctionName(),ce=!0,pe=this.isConstructor(),ge=!(this.isToplevel()||pe);if(ge){var fe=this.getTypeName();'[object Object]'===fe&&(fe='null');var he=this.getMethodName();ue?(fe&&0!=ue.indexOf(fe)&&(le+=fe+'.'),le+=ue,he&&ue.indexOf('.'+he)!=ue.length-he.length-1&&(le+=' [as '+he+']')):le+=fe+'.'+(he||'<anonymous>')}else pe?le+='new '+(ue||'<anonymous>'):ue?le+=ue:(le+=ie,ce=!1);return ce&&(le+=' ('+ie+')'),le}function I(ae){var ie={};return Object.getOwnPropertyNames(Object.getPrototypeOf(ae)).forEach(function(se){ie[se]=/^(?:is|get)/.test(se)?function(){return ae[se].call(ae)}:ae[se]}),ie.toString=N,ie}function D(ae){if(ae.isNative())return ae;var ie=ae.getFileName()||ae.getScriptNameOrSourceURL();if(ie){var se=ae.getLineNumber(),de=ae.getColumnNumber()-1;1!==se||S()||ae.isEval()||(de-=62);var le=M({source:ie,line:se,column:de});return ae=I(ae),ae.getFileName=function(){return le.source},ae.getLineNumber=function(){return le.line},ae.getColumnNumber=function(){return le.column+1},ae.getScriptNameOrSourceURL=function(){return le.source},ae}var ue=ae.isEval()&&ae.getEvalOrigin();return ue?(ue=L(ue),ae=I(ae),ae.getEvalOrigin=function(){return ue},ae):ae}function U(ae,ie){return J&&(Q={},Y={}),ae+ie.map(function(se){return'\n    at '+D(se)}).join('')}function B(ae){var ie=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(ae.stack);if(ie){var se=ie[1],de=+ie[2],le=+ie[3],ue=Q[se];if(!ue&&W&&W.existsSync(se)&&(ue=W.readFileSync(se,'utf8')),ue){var ce=ue.split(/(?:\r\n|\r|\n)/)[de-1];if(ce)return se+':'+de+'\n'+ce+'\n'+Array(le).join(' ')+'^'}}return null}function K(ae){var ie=B(ae);ie&&(console.error(),console.error(ie)),console.error(ae.stack),process.exit(1)}function H(){var ae=process.emit;process.emit=function(ie){if('uncaughtException'===ie){var se=arguments[1]&&arguments[1].stack,de=0<this.listeners(ie).length;if(se&&!de)return K(arguments[1])}return ae.apply(this,arguments)}}var G=A(52).SourceMapConsumer,z=A(0),W;try{W=A(1),W.existsSync&&W.readFileSync||(W=null)}catch(ae){}var V=!1,$=!1,J=!1,X='auto',Q={},Y={},Z=/^data:application\/json[^,]+base64,/,ee=[],ne=[],te=C(ee);ee.push(function(ae){if(ae=ae.trim(),ae in Q)return Q[ae];var ie=null;if(!W){var se=new XMLHttpRequest;se.open('GET',ae,!1),se.send(null);var ie=null;4===se.readyState&&200===se.status&&(ie=se.responseText)}else W.existsSync(ae)&&(ie=W.readFileSync(ae,'utf8'));return Q[ae]=ie});var oe=C(ne);ne.push(function(ae){var ie=O(ae);if(!ie)return null;var se;if(Z.test(ie)){var de=ie.slice(ie.indexOf(',')+1);se=new Buffer(de,'base64').toString(),ie=ae}else ie=R(ae,ie),se=te(ie);return se?{url:ie,map:se}:null}),d.wrapCallSite=D,d.getErrorSource=B,d.mapSourcePosition=M,d.retrieveSourceMap=oe,d.install=function(ae){if(ae=ae||{},ae.environment&&(X=ae.environment,-1===['node','browser','auto'].indexOf(X)))throw new Error('environment '+X+' was unknown. Available options are {auto, browser, node}');if(ae.retrieveFile&&(ae.overrideRetrieveFile&&(ee.length=0),ee.unshift(ae.retrieveFile)),ae.retrieveSourceMap&&(ae.overrideRetrieveSourceMap&&(ne.length=0),ne.unshift(ae.retrieveSourceMap)),ae.hookRequire&&!S()){var ie;try{ie=A(71)}catch(le){}var se=ie.prototype._compile;se.__sourceMapSupport||(ie.prototype._compile=function(le,ue){return Q[ue]=le,Y[ue]=void 0,se.call(this,le,ue)},ie.prototype._compile.__sourceMapSupport=!0)}if(J||(J=!!('emptyCacheBetweenOperations'in ae)&&ae.emptyCacheBetweenOperations),V||(V=!0,Error.prepareStackTrace=U),!$){var de=!('handleUncaughtExceptions'in ae)||ae.handleUncaughtExceptions;de&&w()&&($=!0,H())}}},function(t,d){var A='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');d.encode=function(S){if(0<=S&&S<A.length)return A[S];throw new TypeError('Must be between 0 and 63: '+S)},d.decode=function(S){var w=65,R=97,M=48;return w<=S&&S<=90?S-w:R<=S&&S<=122?S-R+26:M<=S&&S<=57?S-M+52:S==43?62:S==47?63:-1}},function(t,d){function A(S,w,C,R,O,M){var L=Math.floor((w-S)/2)+S,N=O(C,R[L],!0);return 0===N?L:0<N?1<w-L?A(L,w,C,R,O,M):M==d.LEAST_UPPER_BOUND?w<R.length?w:-1:L:1<L-S?A(S,L,C,R,O,M):M==d.LEAST_UPPER_BOUND?L:0>S?-1:S}d.GREATEST_LOWER_BOUND=1,d.LEAST_UPPER_BOUND=2,d.search=function(w,C,R,O){if(0===C.length)return-1;var M=A(-1,C.length,w,C,R,O||d.GREATEST_LOWER_BOUND);if(0>M)return-1;for(;0<=M-1&&!(0!==R(C[M],C[M-1],!0));)--M;return M}},function(t,d,A){function S(R,O){var M=R.generatedLine,L=O.generatedLine,N=R.generatedColumn,I=O.generatedColumn;return L>M||L==M&&I>=N||0>=C.compareByGeneratedPositionsInflated(R,O)}function w(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}var C=A(2);w.prototype.unsortedForEach=function(O,M){this._array.forEach(O,M)},w.prototype.add=function(O){S(this._last,O)?(this._last=O,this._array.push(O)):(this._sorted=!1,this._array.push(O))},w.prototype.toArray=function(){return this._sorted||(this._array.sort(C.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},d.MappingList=w},function(t,d){function A(C,R,O){var M=C[R];C[R]=C[O],C[O]=M}function S(C,R){return _Mathround(C+Math.random()*(R-C))}function w(C,R,O,M){if(O<M){var L=S(O,M),N=O-1;A(C,L,M);for(var I=C[M],D=O;D<M;D++)0>=R(C[D],I)&&(N+=1,A(C,N,D));A(C,N+1,D);var U=N+1;w(C,R,O,U-1),w(C,R,U+1,M)}}d.quickSort=function(C,R){w(C,R,0,C.length-1)}},function(t,d,A){function S(D){var U=D;return'string'==typeof D&&(U=JSON.parse(D.replace(/^\)\]\}'/,''))),null==U.sections?new w(U):new R(U)}function w(D){var U=D;'string'==typeof D&&(U=JSON.parse(D.replace(/^\)\]\}'/,'')));var B=O.getArg(U,'version'),K=O.getArg(U,'sources'),H=O.getArg(U,'names',[]),G=O.getArg(U,'sourceRoot',null),z=O.getArg(U,'sourcesContent',null),W=O.getArg(U,'mappings'),V=O.getArg(U,'file',null);if(B!=this._version)throw new Error('Unsupported version: '+B);K=K.map(String).map(O.normalize).map(function($){return G&&O.isAbsolute(G)&&O.isAbsolute($)?O.relative(G,$):$}),this._names=L.fromArray(H.map(String),!0),this._sources=L.fromArray(K,!0),this.sourceRoot=G,this.sourcesContent=z,this._mappings=W,this.file=V}function C(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function R(D){var U=D;'string'==typeof D&&(U=JSON.parse(D.replace(/^\)\]\}'/,'')));var B=O.getArg(U,'version'),K=O.getArg(U,'sections');if(B!=this._version)throw new Error('Unsupported version: '+B);this._sources=new L,this._names=new L;var H={line:-1,column:0};this._sections=K.map(function(G){if(G.url)throw new Error('Support for url field in sections not implemented.');var z=O.getArg(G,'offset'),W=O.getArg(z,'line'),V=O.getArg(z,'column');if(W<H.line||W===H.line&&V<H.column)throw new Error('Section offsets must be ordered and non-overlapping.');return H=z,{generatedOffset:{generatedLine:W+1,generatedColumn:V+1},consumer:new S(O.getArg(G,'map'))}})}var O=A(2),M=A(47),L=A(10).ArraySet,N=A(11),I=A(49).quickSort;S.fromSourceMap=function(D){return w.fromSourceMap(D)},S.prototype._version=3,S.prototype.__generatedMappings=null,Object.defineProperty(S.prototype,'_generatedMappings',{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),S.prototype.__originalMappings=null,Object.defineProperty(S.prototype,'_originalMappings',{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),S.prototype._charIsMappingSeparator=function(U,B){var K=U.charAt(B);return';'===K||','===K},S.prototype._parseMappings=function(){throw new Error('Subclasses must implement _parseMappings')},S.GENERATED_ORDER=1,S.ORIGINAL_ORDER=2,S.GREATEST_LOWER_BOUND=1,S.LEAST_UPPER_BOUND=2,S.prototype.eachMapping=function(U,B,K){var G=K||S.GENERATED_ORDER,z;switch(G){case S.GENERATED_ORDER:z=this._generatedMappings;break;case S.ORIGINAL_ORDER:z=this._originalMappings;break;default:throw new Error('Unknown order of iteration.');}var W=this.sourceRoot;z.map(function(V){var $=null===V.source?null:this._sources.at(V.source);return null!=$&&null!=W&&($=O.join(W,$)),{source:$,generatedLine:V.generatedLine,generatedColumn:V.generatedColumn,originalLine:V.originalLine,originalColumn:V.originalColumn,name:null===V.name?null:this._names.at(V.name)}},this).forEach(U,B||null)},S.prototype.allGeneratedPositionsFor=function(U){var B=O.getArg(U,'line'),K={source:O.getArg(U,'source'),originalLine:B,originalColumn:O.getArg(U,'column',0)};if(null!=this.sourceRoot&&(K.source=O.relative(this.sourceRoot,K.source)),!this._sources.has(K.source))return[];K.source=this._sources.indexOf(K.source);var H=[],G=this._findMapping(K,this._originalMappings,'originalLine','originalColumn',O.compareByOriginalPositions,M.LEAST_UPPER_BOUND);if(0<=G){var z=this._originalMappings[G];if(void 0===U.column)for(var W=z.originalLine;z&&z.originalLine===W;)H.push({line:O.getArg(z,'generatedLine',null),column:O.getArg(z,'generatedColumn',null),lastColumn:O.getArg(z,'lastGeneratedColumn',null)}),z=this._originalMappings[++G];else for(var V=z.originalColumn;z&&z.originalLine===B&&z.originalColumn==V;)H.push({line:O.getArg(z,'generatedLine',null),column:O.getArg(z,'generatedColumn',null),lastColumn:O.getArg(z,'lastGeneratedColumn',null)}),z=this._originalMappings[++G]}return H},d.SourceMapConsumer=S,w.prototype=Object.create(S.prototype),w.prototype.consumer=S,w.fromSourceMap=function(U){var B=Object.create(w.prototype),K=B._names=L.fromArray(U._names.toArray(),!0),H=B._sources=L.fromArray(U._sources.toArray(),!0);B.sourceRoot=U._sourceRoot,B.sourcesContent=U._generateSourcesContent(B._sources.toArray(),B.sourceRoot),B.file=U._file;for(var G=U._mappings.toArray().slice(),z=B.__generatedMappings=[],W=B.__originalMappings=[],V=0,$=G.length;V<$;V++){var J=G[V],X=new C;X.generatedLine=J.generatedLine,X.generatedColumn=J.generatedColumn,J.source&&(X.source=H.indexOf(J.source),X.originalLine=J.originalLine,X.originalColumn=J.originalColumn,J.name&&(X.name=K.indexOf(J.name)),W.push(X)),z.push(X)}return I(B.__originalMappings,O.compareByOriginalPositions),B},w.prototype._version=3,Object.defineProperty(w.prototype,'sources',{get:function(){return this._sources.toArray().map(function(D){return null==this.sourceRoot?D:O.join(this.sourceRoot,D)},this)}}),w.prototype._parseMappings=function(U){for(var K=1,H=0,G=0,z=0,W=0,V=0,$=U.length,J=0,X={},Q={},Y=[],Z=[],ee,ne,te,oe,ae;J<$;)if(';'===U.charAt(J))K++,J++,H=0;else if(','===U.charAt(J))J++;else{for(ee=new C,ee.generatedLine=K,oe=J;oe<$&&!this._charIsMappingSeparator(U,oe);oe++);if(ne=U.slice(J,oe),te=X[ne],te)J+=ne.length;else{for(te=[];J<oe;)N.decode(U,J,Q),ae=Q.value,J=Q.rest,te.push(ae);if(2===te.length)throw new Error('Found a source, but no line and column');if(3===te.length)throw new Error('Found a source and line, but no column');X[ne]=te}ee.generatedColumn=H+te[0],H=ee.generatedColumn,1<te.length&&(ee.source=W+te[1],W+=te[1],ee.originalLine=G+te[2],G=ee.originalLine,ee.originalLine+=1,ee.originalColumn=z+te[3],z=ee.originalColumn,4<te.length&&(ee.name=V+te[4],V+=te[4])),Z.push(ee),'number'==typeof ee.originalLine&&Y.push(ee)}I(Z,O.compareByGeneratedPositionsDeflated),this.__generatedMappings=Z,I(Y,O.compareByOriginalPositions),this.__originalMappings=Y},w.prototype._findMapping=function(U,B,K,H,G,z){if(0>=U[K])throw new TypeError('Line must be greater than or equal to 1, got '+U[K]);if(0>U[H])throw new TypeError('Column must be greater than or equal to 0, got '+U[H]);return M.search(U,B,G,z)},w.prototype.computeColumnSpans=function(){for(var U=0,B;U<this._generatedMappings.length;++U){if(B=this._generatedMappings[U],U+1<this._generatedMappings.length){var K=this._generatedMappings[U+1];if(B.generatedLine===K.generatedLine){B.lastGeneratedColumn=K.generatedColumn-1;continue}}B.lastGeneratedColumn=Infinity}},w.prototype.originalPositionFor=function(U){var B={generatedLine:O.getArg(U,'line'),generatedColumn:O.getArg(U,'column')},K=this._findMapping(B,this._generatedMappings,'generatedLine','generatedColumn',O.compareByGeneratedPositionsDeflated,O.getArg(U,'bias',S.GREATEST_LOWER_BOUND));if(0<=K){var H=this._generatedMappings[K];if(H.generatedLine===B.generatedLine){var G=O.getArg(H,'source',null);null!==G&&(G=this._sources.at(G),null!=this.sourceRoot&&(G=O.join(this.sourceRoot,G)));var z=O.getArg(H,'name',null);return null!==z&&(z=this._names.at(z)),{source:G,line:O.getArg(H,'originalLine',null),column:O.getArg(H,'originalColumn',null),name:z}}}return{source:null,line:null,column:null,name:null}},w.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(U){return null==U})},w.prototype.sourceContentFor=function(U,B){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(U=O.relative(this.sourceRoot,U)),this._sources.has(U))return this.sourcesContent[this._sources.indexOf(U)];var K;if(null!=this.sourceRoot&&(K=O.urlParse(this.sourceRoot))){var H=U.replace(/^file:\/\//,'');if('file'==K.scheme&&this._sources.has(H))return this.sourcesContent[this._sources.indexOf(H)];if((!K.path||'/'==K.path)&&this._sources.has('/'+U))return this.sourcesContent[this._sources.indexOf('/'+U)]}if(B)return null;throw new Error('"'+U+'" is not in the SourceMap.')},w.prototype.generatedPositionFor=function(U){var B=O.getArg(U,'source');if(null!=this.sourceRoot&&(B=O.relative(this.sourceRoot,B)),!this._sources.has(B))return{line:null,column:null,lastColumn:null};B=this._sources.indexOf(B);var K={source:B,originalLine:O.getArg(U,'line'),originalColumn:O.getArg(U,'column')},H=this._findMapping(K,this._originalMappings,'originalLine','originalColumn',O.compareByOriginalPositions,O.getArg(U,'bias',S.GREATEST_LOWER_BOUND));if(0<=H){var G=this._originalMappings[H];if(G.source===K.source)return{line:O.getArg(G,'generatedLine',null),column:O.getArg(G,'generatedColumn',null),lastColumn:O.getArg(G,'lastGeneratedColumn',null)}}return{line:null,column:null,lastColumn:null}},d.BasicSourceMapConsumer=w,R.prototype=Object.create(S.prototype),R.prototype.constructor=S,R.prototype._version=3,Object.defineProperty(R.prototype,'sources',{get:function(){for(var D=[],U=0;U<this._sections.length;U++)for(var B=0;B<this._sections[U].consumer.sources.length;B++)D.push(this._sections[U].consumer.sources[B]);return D}}),R.prototype.originalPositionFor=function(U){var B={generatedLine:O.getArg(U,'line'),generatedColumn:O.getArg(U,'column')},K=M.search(B,this._sections,function(G,z){var W=G.generatedLine-z.generatedOffset.generatedLine;return W?W:G.generatedColumn-z.generatedOffset.generatedColumn}),H=this._sections[K];return H?H.consumer.originalPositionFor({line:B.generatedLine-(H.generatedOffset.generatedLine-1),column:B.generatedColumn-(H.generatedOffset.generatedLine===B.generatedLine?H.generatedOffset.generatedColumn-1:0),bias:U.bias}):{source:null,line:null,column:null,name:null}},R.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(U){return U.consumer.hasContentsOfAllSources()})},R.prototype.sourceContentFor=function(U,B){for(var K=0;K<this._sections.length;K++){var H=this._sections[K],G=H.consumer.sourceContentFor(U,!0);if(G)return G}if(B)return null;throw new Error('"'+U+'" is not in the SourceMap.')},R.prototype.generatedPositionFor=function(U){for(var B=0,K;B<this._sections.length;B++)if(K=this._sections[B],-1!==K.consumer.sources.indexOf(O.getArg(U,'source'))){var H=K.consumer.generatedPositionFor(U);if(H){var G={line:H.line+(K.generatedOffset.generatedLine-1),column:H.column+(K.generatedOffset.generatedLine===H.line?K.generatedOffset.generatedColumn-1:0)};return G}}return{line:null,column:null}},R.prototype._parseMappings=function(){this.__generatedMappings=[],this.__originalMappings=[];for(var K=0;K<this._sections.length;K++)for(var H=this._sections[K],G=H.consumer._generatedMappings,z=0;z<G.length;z++){var W=G[z],V=H.consumer._sources.at(W.source);null!==H.consumer.sourceRoot&&(V=O.join(H.consumer.sourceRoot,V)),this._sources.add(V),V=this._sources.indexOf(V);var $=H.consumer._names.at(W.name);this._names.add($),$=this._names.indexOf($);var J={source:V,generatedLine:W.generatedLine+(H.generatedOffset.generatedLine-1),generatedColumn:W.generatedColumn+(H.generatedOffset.generatedLine===W.generatedLine?H.generatedOffset.generatedColumn-1:0),originalLine:W.originalLine,originalColumn:W.originalColumn,name:$};this.__generatedMappings.push(J),'number'==typeof J.originalLine&&this.__originalMappings.push(J)}I(this.__generatedMappings,O.compareByGeneratedPositionsDeflated),I(this.__originalMappings,O.compareByOriginalPositions)},d.IndexedSourceMapConsumer=R},function(t,d,A){function S(L,N,I,D,U){this.children=[],this.sourceContents={},this.line=null==L?null:L,this.column=null==N?null:N,this.source=null==I?null:I,this.name=null==U?null:U,this[M]=!0,null!=D&&this.add(D)}var w=A(12).SourceMapGenerator,C=A(2),R=/(\r?\n)/,M='$$$isSourceNode$$$';S.fromStringWithSourceMap=function(N,I,D){function U(V,$){if(null===V||void 0===V.source)B.add($);else{var J=D?C.join(D,V.source):V.source;B.add(new S(V.originalLine,V.originalColumn,J,$,V.name))}}var B=new S,K=N.split(R),H=function(){var V=K.shift(),$=K.shift()||'';return V+$},G=1,z=0,W=null;return I.eachMapping(function(V){if(null!=W)if(G<V.generatedLine)U(W,H()),G++,z=0;else{var $=K[0],J=$.substr(0,V.generatedColumn-z);return K[0]=$.substr(V.generatedColumn-z),z=V.generatedColumn,U(W,J),void(W=V)}for(;G<V.generatedLine;)B.add(H()),G++;if(z<V.generatedColumn){var $=K[0];B.add($.substr(0,V.generatedColumn)),K[0]=$.substr(V.generatedColumn),z=V.generatedColumn}W=V},this),0<K.length&&(W&&U(W,H()),B.add(K.join(''))),I.sources.forEach(function(V){var $=I.sourceContentFor(V);null!=$&&(null!=D&&(V=C.join(D,V)),B.setSourceContent(V,$))}),B},S.prototype.add=function(N){if(Array.isArray(N))N.forEach(function(I){this.add(I)},this);else if(N[M]||'string'==typeof N)N&&this.children.push(N);else throw new TypeError('Expected a SourceNode, string, or an array of SourceNodes and strings. Got '+N);return this},S.prototype.prepend=function(N){if(Array.isArray(N))for(var I=N.length-1;0<=I;I--)this.prepend(N[I]);else if(N[M]||'string'==typeof N)this.children.unshift(N);else throw new TypeError('Expected a SourceNode, string, or an array of SourceNodes and strings. Got '+N);return this},S.prototype.walk=function(N){for(var D=0,U=this.children.length,I;D<U;D++)I=this.children[D],I[M]?I.walk(N):''!==I&&N(I,{source:this.source,line:this.line,column:this.column,name:this.name})},S.prototype.join=function(N){var I,D,U=this.children.length;if(0<U){for(I=[],D=0;D<U-1;D++)I.push(this.children[D]),I.push(N);I.push(this.children[D]),this.children=I}return this},S.prototype.replaceRight=function(N,I){var D=this.children[this.children.length-1];return D[M]?D.replaceRight(N,I):'string'==typeof D?this.children[this.children.length-1]=D.replace(N,I):this.children.push(''.replace(N,I)),this},S.prototype.setSourceContent=function(N,I){this.sourceContents[C.toSetString(N)]=I},S.prototype.walkSourceContents=function(N){for(var I=0,D=this.children.length;I<D;I++)this.children[I][M]&&this.children[I].walkSourceContents(N);for(var U=Object.keys(this.sourceContents),I=0,D=U.length;I<D;I++)N(C.fromSetString(U[I]),this.sourceContents[U[I]])},S.prototype.toString=function(){var N='';return this.walk(function(I){N+=I}),N},S.prototype.toStringWithSourceMap=function(N){var I={code:'',line:1,column:0},D=new w(N),U=!1,B=null,K=null,H=null,G=null;return this.walk(function(z,W){I.code+=z,null!==W.source&&null!==W.line&&null!==W.column?((B!==W.source||K!==W.line||H!==W.column||G!==W.name)&&D.addMapping({source:W.source,original:{line:W.line,column:W.column},generated:{line:I.line,column:I.column},name:W.name}),B=W.source,K=W.line,H=W.column,G=W.name,U=!0):U&&(D.addMapping({generated:{line:I.line,column:I.column}}),B=null,U=!1);for(var V=0,$=z.length;V<$;V++)z.charCodeAt(V)===10?(I.line++,I.column=0,V+1===$?(B=null,U=!1):U&&D.addMapping({source:W.source,original:{line:W.line,column:W.column},generated:{line:I.line,column:I.column},name:W.name})):I.column++}),this.walkSourceContents(function(z,W){D.setSourceContent(z,W)}),{code:I.code,map:D}},d.SourceNode=S},function(t,d,A){d.SourceMapGenerator=A(12).SourceMapGenerator,d.SourceMapConsumer=A(50).SourceMapConsumer,d.SourceNode=A(51).SourceNode},function(t){'use strict';t.exports=function(S){var w='string'==typeof S?'\n':'\n'.charCodeAt(),C='string'==typeof S?'\r':'\r'.charCodeAt();return S[S.length-1]===w&&(S=S.slice(0,S.length-1)),S[S.length-1]===C&&(S=S.slice(0,S.length-1)),S}},function(t,d,A){'use strict';function S(){const L=process.env;return L.SUDO_USER||L.C9_USER||L.LOGNAME||L.USER||L.LNAME||L.USERNAME}function C(){}const R=A(17),O=A(33),M=A(40);t.exports=M(()=>{if(R.userInfo)return Promise.resolve(R.userInfo().username);const L=S();return L?Promise.resolve(L):O('id',['-un']).then((N)=>N.stdout).catch(C)}),t.exports.sync=M(()=>{if(R.userInfo)return R.userInfo().username;const L=S();if(L)return L;try{return O.sync('id',['-un']).stdout}catch(N){}})},function(t){for(var S=[],w=0;256>w;++w)S[w]=(w+256).toString(16).substr(1);t.exports=function(C,R){var O=R||0,M=S;return M[C[O++]]+M[C[O++]]+M[C[O++]]+M[C[O++]]+'-'+M[C[O++]]+M[C[O++]]+'-'+M[C[O++]]+M[C[O++]]+'-'+M[C[O++]]+M[C[O++]]+'-'+M[C[O++]]+M[C[O++]]+M[C[O++]]+M[C[O++]]+M[C[O++]]+M[C[O++]]}},function(t,d,A){var w=A(16).randomBytes;t.exports=function(){return w(16)}},function(t,d,A){var w=A(56),C=A(55);t.exports=function(R,O,M){var L=O&&M||0;'string'==typeof R&&(O='binary'==R?Array(16):null,R=null),R=R||{};var N=R.random||(R.rng||w)();if(N[6]=64|15&N[6],N[8]=128|63&N[8],O)for(var I=0;16>I;++I)O[L+I]=N[I];return O||C(N)}},function(t,d,A){function S(I){var D=new Error('not found: '+I);return D.code='ENOENT',D}function w(I,D){var U=D.colon||L,B=D.path||process.env.PATH||'',K=[''];B=B.split(U);var H='';return O&&(B.unshift(process.cwd()),H=D.pathExt||process.env.PATHEXT||'.EXE;.CMD;.BAT;.COM',K=H.split(U),-1!==I.indexOf('.')&&''!==K[0]&&K.unshift('')),(I.match(/\//)||O&&I.match(/\\/))&&(B=['']),{env:B,ext:K,extExe:H}}function C(I,D,U){'function'==typeof D&&(U=D,D={});var B=w(I,D),K=B.env,H=B.ext,G=B.extExe,z=[];(function W(V,$){if(V===$)return D.all&&z.length?U(null,z):U(S(I));var J=K[V];'"'===J.charAt(0)&&'"'===J.slice(-1)&&(J=J.slice(1,-1));var X=M.join(J,I);!J&&/^\.[\\\/]/.test(I)&&(X=I.slice(0,2)+X);(function Q(Y,Z){if(Y===Z)return W(V+1,$);var ee=H[Y];N(X+ee,{pathExt:G},function(ne,te){if(!ne&&te)if(D.all)z.push(X+ee);else return U(null,X+ee);return Q(Y+1,Z)})})(0,H.length)})(0,K.length)}t.exports=C,C.sync=function(I,D){D=D||{};for(var U=w(I,D),B=U.env,K=U.ext,H=U.extExe,G=[],z=0,W=B.length,V;z<W;z++){V=B[z],'"'===V.charAt(0)&&'"'===V.slice(-1)&&(V=V.slice(1,-1));var $=M.join(V,I);!V&&/^\.[\\\/]/.test(I)&&($=I.slice(0,2)+$);for(var J=0,X=K.length;J<X;J++){var Q=$+K[J],Y;try{if(Y=N.sync(Q,{pathExt:H}),Y)if(D.all)G.push(Q);else return Q}catch(Z){}}}if(D.all&&G.length)return G;throw S(I)};var O='cygwin'===process.env.OSTYPE||'msys'===process.env.OSTYPE,M=A(0),L=O?';':':',N=A(36)},function(t){function A(R){var O=this;if(O instanceof A||(O=new A),O.tail=null,O.head=null,O.length=0,R&&'function'==typeof R.forEach)R.forEach(function(N){O.push(N)});else if(0<arguments.length)for(var M=0,L=arguments.length;M<L;M++)O.push(arguments[M]);return O}function S(R,O){R.tail=new C(O,R.tail,null,R),R.head||(R.head=R.tail),R.length++}function w(R,O){R.head=new C(O,null,R.head,R),R.tail||(R.tail=R.head),R.length++}function C(R,O,M,L){return this instanceof C?void(this.list=L,this.value=R,O?(O.next=this,this.prev=O):this.prev=null,M?(M.prev=this,this.next=M):this.next=null):new C(R,O,M,L)}t.exports=A,A.Node=C,A.create=A,A.prototype.removeNode=function(R){if(R.list!==this)throw new Error('removing node which does not belong to this list');var O=R.next,M=R.prev;O&&(O.prev=M),M&&(M.next=O),R===this.head&&(this.head=O),R===this.tail&&(this.tail=M),R.list.length--,R.next=null,R.prev=null,R.list=null},A.prototype.unshiftNode=function(R){if(R!==this.head){R.list&&R.list.removeNode(R);var O=this.head;R.list=this,R.next=O,O&&(O.prev=R),this.head=R,this.tail||(this.tail=R),this.length++}},A.prototype.pushNode=function(R){if(R!==this.tail){R.list&&R.list.removeNode(R);var O=this.tail;R.list=this,R.prev=O,O&&(O.next=R),this.tail=R,this.head||(this.head=R),this.length++}},A.prototype.push=function(){for(var R=0,O=arguments.length;R<O;R++)S(this,arguments[R]);return this.length},A.prototype.unshift=function(){for(var R=0,O=arguments.length;R<O;R++)w(this,arguments[R]);return this.length},A.prototype.pop=function(){if(this.tail){var R=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,R}},A.prototype.shift=function(){if(this.head){var R=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,R}},A.prototype.forEach=function(R,O){O=O||this;for(var M=this.head,L=0;null!==M;L++)R.call(O,M.value,L,this),M=M.next},A.prototype.forEachReverse=function(R,O){O=O||this;for(var M=this.tail,L=this.length-1;null!==M;L--)R.call(O,M.value,L,this),M=M.prev},A.prototype.get=function(R){for(var O=0,M=this.head;null!==M&&O<R;O++)M=M.next;if(O===R&&null!==M)return M.value},A.prototype.getReverse=function(R){for(var O=0,M=this.tail;null!==M&&O<R;O++)M=M.prev;if(O===R&&null!==M)return M.value},A.prototype.map=function(R,O){O=O||this;for(var M=new A,L=this.head;null!==L;)M.push(R.call(O,L.value,this)),L=L.next;return M},A.prototype.mapReverse=function(R,O){O=O||this;for(var M=new A,L=this.tail;null!==L;)M.push(R.call(O,L.value,this)),L=L.prev;return M},A.prototype.reduce=function(R,O){var M,L=this.head;if(1<arguments.length)M=O;else if(this.head)L=this.head.next,M=this.head.value;else throw new TypeError('Reduce of empty list with no initial value');for(var N=0;null!==L;N++)M=R(M,L.value,N),L=L.next;return M},A.prototype.reduceReverse=function(R,O){var M,L=this.tail;if(1<arguments.length)M=O;else if(this.tail)L=this.tail.prev,M=this.tail.value;else throw new TypeError('Reduce of empty list with no initial value');for(var N=this.length-1;null!==L;N--)M=R(M,L.value,N),L=L.prev;return M},A.prototype.toArray=function(){for(var R=Array(this.length),O=0,M=this.head;null!==M;O++)R[O]=M.value,M=M.next;return R},A.prototype.toArrayReverse=function(){for(var R=Array(this.length),O=0,M=this.tail;null!==M;O++)R[O]=M.value,M=M.prev;return R},A.prototype.slice=function(R,O){O=O||this.length,0>O&&(O+=this.length),R=R||0,0>R&&(R+=this.length);var M=new A;if(O<R||0>O)return M;0>R&&(R=0),O>this.length&&(O=this.length);for(var L=0,N=this.head;null!==N&&L<R;L++)N=N.next;for(;null!==N&&L<O;L++,N=N.next)M.push(N.value);return M},A.prototype.sliceReverse=function(R,O){O=O||this.length,0>O&&(O+=this.length),R=R||0,0>R&&(R+=this.length);var M=new A;if(O<R||0>O)return M;0>R&&(R=0),O>this.length&&(O=this.length);for(var L=this.length,N=this.tail;null!==N&&L>O;L--)N=N.prev;for(;null!==N&&L>R;L--,N=N.prev)M.push(N.value);return M},A.prototype.reverse=function(){for(var R=this.head,O=this.tail,M=R,L;null!==M;M=M.prev)L=M.prev,M.prev=M.next,M.next=L;return this.head=O,this.tail=R,this}},function(t,d){'use strict';Object.defineProperty(d,'__esModule',{value:!0});var R;(function(O){O[O.Sms=0]='Sms',O[O.App=1]='App'})(R=d.AuthenticationMode||(d.AuthenticationMode={})),d.getWelcomeMessage=function(O){return O===R.Sms?'We just sent you a message via SMS with your authentication code. Enter the code in the form below to verify your identity.':'Open the two-factor authentication app on your device to view your authentication code and verify your identity.'}},function(t,d){'use strict';function w(C){const R='GitHub';return`${R} - ${C}`}Object.defineProperty(d,'__esModule',{value:!0}),d.getKeyForAccount=function(C){return w(C.endpoint)},d.getKeyForEndpoint=w},function(t,d,A){'use strict';Object.defineProperty(d,'__esModule',{value:!0});const C=A(29);d.structuralEquals=function(R,O){return C(R,O,{strict:!0})},d.shallowEquals=function(R,O){if(Object.is(R,O))return!0;if(null===R||null===O||'object'!=typeof R||'object'!=typeof O)return!1;const M=Object.keys(R),L=Object.keys(O);if(M.length!==L.length)return!1;for(let N=0;N<M.length;N++){const I=M[N];if(!Object.prototype.hasOwnProperty.call(O,I)||!Object.is(R[I],O[I]))return!1}return!0}},function(t,d){'use strict';Object.defineProperty(d,'__esModule',{value:!0}),d.fatalError=function(C){throw new Error(C)},d.assertNever=function(C,R){throw new Error(R)}},function(t,d,A){'use strict';function S(I){return M(this,void 0,void 0,function*(){try{const D=yield I.json();return D}catch(D){throw log.warn(`Unable to deserialize JSON string to object ${I}`,D),D}})}function C(){const I='Macintosh';return`GitHubDesktop/${L.getVersion()} (${I})`}var M=this&&this.__awaiter||function(I,D,U,B){return new(U||(U=Promise))(function(K,H){function G(V){try{W(B.next(V))}catch($){H($)}}function z(V){try{W(B['throw'](V))}catch($){H($)}}function W(V){V.done?K(V.value):new U(function($){$(V.value)}).then(G,z)}W((B=B.apply(I,D||[])).next())})};Object.defineProperty(d,'__esModule',{value:!0});const L=A(69);class N extends Error{constructor(I,D){let U;if(D&&D.message){U=D.message;const B=D.errors,K=B&&B.map((H)=>H.message).join(', ');K&&(U=`${U} (${K})`)}else U=`API error ${I.url}: ${I.statusText} (${I.status})`;super(U),this.apiError=D}}d.APIError=N,d.request=function(I,D,U,B,K,H){const G='/'===B[0]?B.substr(1):B,z=encodeURI(`${I}/${G}`);let W={Accept:'application/vnd.github.v3+json, application/json','Content-Type':'application/json','User-Agent':C()};D&&(W.Authorization=`token ${D}`),W=Object.assign({},W,H);const V={headers:W,method:U,body:JSON.stringify(K)};return fetch(z,V)},d.parsedResponse=function(I){return M(this,void 0,void 0,function*(){if(I.ok)return S(I);let D;try{D=yield S(I)}catch(U){throw new N(I,null)}throw D})},d.urlWithQueryString=function(I,D){const U=Object.keys(D).map((B)=>`${B}=${encodeURIComponent(D[B])}`).join('&');return U.length?-1===I.indexOf('?')?`${I}?${U}`:`${I}&${U}`:I}},function(t,d,A){'use strict';Object.defineProperty(d,'__esModule',{value:!0});const w=A(6);d.formatError=function(C,R){return C=w.withSourceMappedStack(C),C.stack?R?`${R}\n${C.stack}`:C.stack.trim():R?`${R}\n${C.name}: ${C.message}`:`${C.name}: ${C.message}`}},function(t,d,A){'use strict';Object.defineProperty(d,'__esModule',{value:!0});const w=A(65);d.formatLogMessage=function(C,R){return R?w.formatError(R,C):C}},function(t,d,A){'use strict';function S(O){if(window.crypto){const M=new Uint8Array(O);return crypto.getRandomValues(M),Buffer.from(M.buffer)}return C.randomBytes(O)}Object.defineProperty(d,'__esModule',{value:!0});const C=A(16),R=A(57);d.uuid=function(){return R({random:S(16)})}},function(t,d,A){'use strict';function S(){return C(this,void 0,void 0,function*(){yield H.map((V)=>C(this,void 0,void 0,function*(){const $=U.API.fromAccount(V),J=yield $.fetchAccount(),X=yield $.fetchEmails();return new M.Account(V.login,V.endpoint,V.token,X,J.avatar_url,J.id,J.name)})),W()})}var w=this,C=this&&this.__awaiter||function(V,$,J,X){return new(J||(J=Promise))(function(Q,Y){function Z(te){try{ne(X.next(te))}catch(oe){Y(oe)}}function ee(te){try{ne(X['throw'](te))}catch(oe){Y(oe)}}function ne(te){te.done?Q(te.value):new J(function(oe){oe(te.value)}).then(Z,ee)}ne((X=X.apply(V,$||[])).next())})};Object.defineProperty(d,'__esModule',{value:!0}),A(18);const R=A(23),O=A(19),M=A(4),L=A(21),N=A(22),I=A(7),D=A(20),U=A(5),B=A(24),K=A(6);K.enableSourceMaps(),process.on('uncaughtException',(V)=>{V=K.withSourceMappedStack(V),console.error('Uncaught exception',V),B.sendErrorReport(V),B.reportUncaughtException(V)});const H=new O.AccountsStore(localStorage,R),G=new L.Database('Database'),z=new N.RepositoriesStore(G),W=()=>D.broadcastUpdate(H,z);S(),D.register('ping',()=>{return Promise.resolve('pong')}),D.register('get-accounts',()=>H.getAll()),D.register('add-account',({account:V})=>C(w,void 0,void 0,function*(){yield H.addAccount(M.Account.fromJSON(V)),yield S()})),D.register('remove-account',({account:V})=>C(w,void 0,void 0,function*(){yield H.removeAccount(M.Account.fromJSON(V)),W()})),D.register('add-repositories',({paths:V})=>C(w,void 0,void 0,function*(){const $=[];for(const J of V){const X=yield z.addRepository(J);$.push(X)}return W(),$})),D.register('remove-repositories',({repositoryIDs:V})=>C(w,void 0,void 0,function*(){const $=[];for(const J of V)yield z.removeRepository(J),$.push(J);return W(),$})),D.register('get-repositories',()=>{return z.getRepositories()}),D.register('update-github-repository',({repository:V})=>C(w,void 0,void 0,function*(){const $=I.Repository.fromJSON(V),J=yield z.updateGitHubRepository($);return W(),J})),D.register('update-repository-missing',({repository:V,missing:$})=>C(w,void 0,void 0,function*(){const J=I.Repository.fromJSON(V),X=yield z.updateRepositoryMissing(J,$);return W(),X})),D.register('update-repository-path',({repository:V,path:$})=>C(w,void 0,void 0,function*(){const J=I.Repository.fromJSON(V),X=yield z.updateRepositoryPath(J,$),Q=yield z.updateRepositoryMissing(X,!1);return W(),Q}))},function(t,d,A){'use strict';function S(){return N||(N=L.remote.app),N}Object.defineProperty(d,'__esModule',{value:!0});const L=A(3);let N=null,I=null,D=null,U=null,B=null,K=null;d.getVersion=function(){return I||(I=S().getVersion()),I},d.getName=function(){return D||(D=S().getName()),D},d.getAppPath=function(){return U||(U=S().getAppPath()),U},d.getUserDataPath=function(){return B||(B=S().getPath('userData')),B},d.getDocumentsPath=function(){if(!K){const H=S();try{K=H.getPath('documents')}catch(G){K=H.getPath('home')}}return K}},function(t){t.exports=require('./keytar.node')},function(t){t.exports=require('module')},function(t){t.exports=require('url')},function(t){t.exports=require('util')}]);
//# sourceMappingURL=shared.js.map